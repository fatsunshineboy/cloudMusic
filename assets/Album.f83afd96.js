import{M as a,d as s,r as e,k as l,c as i,a as t,u as n,t as m,b as o,F as d,m as r,n as u,s as c,q as p,v,g,l as b,C as y,D as h,E as f,o as k,x as C,y as N,e as I,_}from"./index.f13d04ae.js";import{P as S,S as T}from"./SongPlayList.8d13806d.js";import{C as $,c as j}from"./Comment.ba1ace2b.js";import"./el-select.717c9ca8.js";const x=s=>a({url:"/album",method:"GET",params:s}),D=a=>(C("data-v-de8fbb61"),a=a(),N(),a),L={id:"songList"},P={class:"header"},w={class:"albumImg"},E=["src"],F={class:"detail"},M={class:"title"},q=D((()=>t("div",{class:"alias"},"专辑",-1))),A={class:"name"},G=D((()=>t("div",{class:"edit iconItem"},null,-1))),R={class:"tool"},U={class:"info"},Y={class:"artist"},z=D((()=>t("span",null,"歌手： ",-1))),B={class:"nameItem"},H={class:"time"},J=D((()=>t("span",null,"时间： ",-1))),K={class:"timeItem"},O={class:"navigate"},Q={key:1,class:"ablbumDetail"},V=D((()=>t("div",{class:"intro"},"专辑介绍",-1))),W=_(s({__name:"Album",setup(a){const s=I(),C=e();l((()=>s.params.id),(()=>{var a;_.value=void 0,N.value=1,W.value=[],X(),null==(a=C.value)||a.getComment()}));let N=e(1),_=e(),D=e(),W=e([]);const X=()=>{x({id:s.params.id}).then((a=>{_.value=a.album,D.value=_.value.description.split("\n"),W.value=a.songs.map((a=>({id:a.id,songName:a.name,singer:a.ar.map((a=>a.name)),singerId:a.ar.map((a=>a.id)),source:s.params.id,sourceType:y.album,sourceName:a.al.name,albumName:a.al.name,albumId:a.al.id,time:h(a.dt/1e3),pop:a.pop})))})).catch((a=>{f.replace("/")}))};X();const Z=a=>{let s=new Date(a);return`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`};let aa=e([{name:"音乐标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时长",props:"time",length:15},{name:"热度",props:"pop",length:40}]);return(a,s)=>{var e,l,y,h,I,x,X;return k(),i("div",L,[t("div",P,[t("div",w,[t("img",{src:`${null==(e=n(_))?void 0:e.picUrl}?param=300y300`},null,8,E)]),t("div",F,[t("div",M,[q,t("div",A,m(null==(l=n(_))?void 0:l.name),1),G]),t("div",R,[o(S,{"play-list":(X=n(W),X.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,sourceName:a.albumName,time:a.time}))))},null,8,["play-list"])]),t("div",U,[t("div",Y,[z,(k(!0),i(d,null,r(null==(y=n(_))?void 0:y.artists,((a,e)=>{var l,o;return k(),i("span",{class:"name",onClick:s[0]||(s[0]=a=>{var s,e;return n(f).push(`/singer/${null==(e=null==(s=n(_))?void 0:s.artist)?void 0:e.id}`)})},[t("span",B,m(null==a?void 0:a.name),1),p(t("span",null," / ",512),[[v,e!=(null==(o=null==(l=n(_))?void 0:l.artists)?void 0:o.length)-1]])])})),256))]),t("div",H,[J,t("span",K,m(Z(null==(h=n(_))?void 0:h.publishTime)),1)])])])]),t("div",O,[t("div",{class:u(["songPlayList",{isSelected:1===n(N)}]),onClick:s[1]||(s[1]=a=>c(N)?N.value=1:N=1)},"歌曲列表 ",2),t("div",{class:u(["comment",{isSelected:2===n(N)}]),onClick:s[2]||(s[2]=a=>c(N)?N.value=2:N=2)},"评论("+m((null==(x=null==(I=n(_))?void 0:I.info)?void 0:x.commentCount)||0)+")",3),t("div",{class:u(["collecter",{isSelected:3===n(N)}]),onClick:s[3]||(s[3]=a=>c(N)?N.value=3:N=3)},"专辑详情 ",2)]),p(o(T,{"play-list-detail":n(W),"title-setting":n(aa),"show-tool-title":!1},null,8,["play-list-detail","title-setting"]),[[v,1===n(N)]]),2===n(N)?(k(),g($,{key:0,type:n(j).album,ref_key:"commentRef",ref:C},null,8,["type"])):b("",!0),3===n(N)?(k(),i("div",Q,[V,(k(!0),i(d,null,r(n(D),((a,s)=>(k(),i("p",{class:"text",key:s},m(a),1)))),128))])):b("",!0)])}}}),[["__scopeId","data-v-de8fbb61"]]);export{W as default};
