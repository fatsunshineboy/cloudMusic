import{d as a,k as e,o as l,c as s,F as i,l as t,m as n,n as d,a as o,t as v,_ as c,q as r,u,s as m,j as p,v as g,x as b,r as y,y as h,b as k,z as I,e as f,A as C,B as x,C as _,D as T,g as L,E as N,G as S,H as $,I as D}from"./index.21005268.js";import{E as w,P}from"./PlayAllAndDownloadAll.c8849e43.js";import{p as A}from"./playListApi.a8a23c75.js";const j={id:"songPlayList"},z=n('<div id="title" data-v-8ed6a72c><div class="action" data-v-8ed6a72c>操作</div><div class="title" data-v-8ed6a72c>标题</div><div class="songer" data-v-8ed6a72c>歌手</div><div class="album" data-v-8ed6a72c>专辑</div><div class="time" data-v-8ed6a72c>时间</div></div>',1),U=["onDblclick"],B={class:"tool"},R={class:"order"},q=n('<div class="favourite" data-v-8ed6a72c><div class="iconItem" data-v-8ed6a72c><svg class="icon" aria-hidden="true" data-v-8ed6a72c><use xlink:href="#icon-aixin" data-v-8ed6a72c></use></svg></div></div><div class="download" data-v-8ed6a72c><div class="iconItem" data-v-8ed6a72c><svg class="icon" aria-hidden="true" data-v-8ed6a72c><use xlink:href="#icon-xiazai1" data-v-8ed6a72c></use></svg></div></div>',2),E={class:"content"},F={class:"title"},G={class:"songer"},H={class:"album"},M={class:"time"},O=c(a({__name:"SongPlayList",props:["playListDetail"],setup(a){const n=a,c=e(),r=a=>a<10?"0"+(a+1):a+"";return(a,e)=>(l(),s("div",j,[z,(l(!0),s(i,null,t(n.playListDetail,((a,e)=>(l(),s("div",{class:d(["singleItem",{bgColor:e%2==0}]),key:e,onDblclick:a=>(a=>{c.setPlayList(n.playListDetail.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,playListName:a.playListName,time:a.time})))),c.setNowToPlayId(a)})(e)},[o("div",B,[o("div",R,v(r(e)),1),q]),o("div",E,[o("div",F,v(a.songName),1),o("div",G,v(a.singer),1),o("div",H,v(a.albumName),1),o("div",M,v(a.time),1)])],42,U)))),128))]))}}),[["__scopeId","data-v-8ed6a72c"]]),V=a=>r({url:`/comment/playlist?timerstamp=${Date.now()}`,method:"GET",params:a}),Y=a=>r({url:`/comment/like?timerstamp=${Date.now()}`,method:"GET",params:a});var J=(a=>(a[a.song=0]="song",a[a.mv=1]="mv",a[a.playlist=2]="playlist",a[a.album=3]="album",a[a.radiioStationProgram=4]="radiioStationProgram",a[a.video=5]="video",a[a.post=6]="post",a[a.radiioStation=7]="radiioStation",a))(J||{});const K={class:"contentItem"},Q=["src"],W={class:"detail"},X={class:"nameAndText"},Z={class:"text"},aa={key:0,id:"reply"},ea={class:"text"},la={class:"timeAndTool"},sa={class:"time"},ia={class:"commentTool"},ta=(a=>(g("data-v-45d0aa7f"),a=a(),b(),a))((()=>o("div",{class:"support"},[o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-dianzan"})])],-1))),na={class:"supportCount"},da=n('<div class="gap" data-v-45d0aa7f>|</div><div class="share" data-v-45d0aa7f><svg class="icon" aria-hidden="true" data-v-45d0aa7f><use xlink:href="#icon-fenxiang" data-v-45d0aa7f></use></svg></div><div class="gap" data-v-45d0aa7f>|</div><div class="reply" data-v-45d0aa7f><svg class="icon" aria-hidden="true" data-v-45d0aa7f><use xlink:href="#icon-pinglun" data-v-45d0aa7f></use></svg></div>',4),oa=c(a({__name:"Comment",props:{commentItem:{type:Object,required:!0},likeCommentButton:{type:Function,required:!0}},setup(a){const e=p();return(i,t)=>{var n,d,c,r,p,g,b,y,h,k,I,f,C,x;return l(),s("div",K,[o("img",{src:`${null==(d=null==(n=a.commentItem)?void 0:n.user)?void 0:d.avatarUrl}?param=60y60`,onClick:t[0]||(t[0]=l=>{var s,i;return u(e).push(`/user/${null==(i=null==(s=a.commentItem)?void 0:s.user)?void 0:i.userId}`)})},null,8,Q),o("div",W,[o("div",X,[o("span",{class:"name",onClick:t[1]||(t[1]=l=>{var s,i;return u(e).push(`/user/${null==(i=null==(s=a.commentItem)?void 0:s.user)?void 0:i.userId}`)})},v(null==(r=null==(c=a.commentItem)?void 0:c.user)?void 0:r.nickname),1),o("span",Z," : "+v(null==(p=a.commentItem)?void 0:p.content),1)]),(null==(b=null==(g=a.commentItem)?void 0:g.beReplied)?void 0:b.length)?(l(),s("div",aa,[o("div",{class:"name",onClick:t[2]||(t[2]=l=>{var s,i,t;return u(e).push(`/user/${null==(t=null==(i=null==(s=a.commentItem)?void 0:s.beReplied[0])?void 0:i.user)?void 0:t.userId}`)})},"@"+v(null==(k=null==(h=null==(y=a.commentItem)?void 0:y.beReplied[0])?void 0:h.user)?void 0:k.nickname),1),o("div",ea," : "+v(null==(f=null==(I=a.commentItem)?void 0:I.beReplied[0])?void 0:f.content),1)])):m("",!0),o("div",la,[o("div",sa,v(null==(C=a.commentItem)?void 0:C.timeStr),1),o("div",ia,[o("div",{class:"supportAndCount",onClick:t[3]||(t[3]=e=>{var l,s;return a.likeCommentButton(null==(l=a.commentItem)?void 0:l.commentId,(null==(s=a.commentItem)?void 0:s.liked)?0:1)})},[ta,o("span",na,v(null==(x=a.commentItem)?void 0:x.likedCount),1)]),da])])])])}}}),[["__scopeId","data-v-45d0aa7f"]]),va=a=>(g("data-v-1033bb6d"),a=a(),b(),a),ca={id:"comment"},ra=n('<textarea class="textarea customeScroll" name="saysths" rows="3" wrap="soft" data-v-1033bb6d></textarea><div class="tool" data-v-1033bb6d><div class="iconItem" data-v-1033bb6d><div class="topic" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-hashjinghao" data-v-1033bb6d></use></svg></div><div class="at" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-aite1" data-v-1033bb6d></use></svg></div><div class="emoji" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-xiaolian1" data-v-1033bb6d></use></svg></div></div><div class="sendComment" data-v-1033bb6d>评论</div></div>',2),ua={class:"content"},ma={key:0,class:"noComment"},pa={key:1,class:"hotComment"},ga=va((()=>o("div",{class:"title"},"精彩评论",-1))),ba={key:2,class:"moreHotComment"},ya={key:3,class:"latestComment"},ha={class:"title"},ka={class:"pagination"},Ia=c(a({__name:"Comment",props:{type:{type:Number,required:!0}},setup(a,{expose:e}){const n=a,c=f();let r=y(),p=y(),g=y(),b=y(0),C=y(1),x=y(100);const _=(a,e)=>{Y({id:c.params.id,cid:a,t:e,type:n.type}).then((a=>{T()}))},T=()=>{if(n.type===J.playlist)L(x.value,(C.value-1)*x.value)},L=(a,e,l)=>{V({id:c.params.id,limit:a,offset:e}).then((a=>{var e;r.value=null==a?void 0:a.comments,b.value=a.total,p.value=null==(e=null==a?void 0:a.hotComments)?void 0:e.slice(0,10),g.value=null==a?void 0:a.moreHot}))};return h((()=>C.value),(()=>{r.value=[],p.value=[],T()}),{immediate:!0}),e({getComment:T}),(a,e)=>{var n,c,y,h,f;const T=w;return l(),s("div",ca,[ra,o("div",ua,[(null==(n=u(r))?void 0:n.length)||(null==(c=u(p))?void 0:c.length)?m("",!0):(l(),s("div",ma," 还没有评论，快来抢沙发~ ")),(null==(y=u(p))?void 0:y.length)?(l(),s("div",pa,[ga,(l(!0),s(i,null,t(u(p),((a,e)=>(l(),s("div",{class:"contentItem borderBottom",key:e},[k(oa,{"comment-item":a,"like-comment-button":_},null,8,["comment-item"])])))),128))])):m("",!0),(null==(h=u(p))?void 0:h.length)&&u(g)?(l(),s("div",ba," 更多精彩评论 > ")):m("",!0),(null==(f=u(r))?void 0:f.length)?(l(),s("div",ya,[o("div",ha,"最新评论("+v(u(b))+")",1),(l(!0),s(i,null,t(u(r),((a,e)=>{var i;return l(),s("div",{class:d(["contentItem",{borderBottom:e!=(null==(i=u(r))?void 0:i.length)-1}]),key:e},[k(oa,{"comment-item":a,"like-comment-button":_},null,8,["comment-item"])],2)})),128))])):m("",!0),o("div",ka,[k(T,{small:"",background:"",layout:"prev, pager, next",total:u(b),"page-size":u(x),"current-page":u(C),"onUpdate:current-page":e[0]||(e[0]=a=>I(C)?C.value=a:C=a),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])])}}}),[["__scopeId","data-v-1033bb6d"]]),fa=a=>(g("data-v-97c5b7c8"),a=a(),b(),a),Ca={id:"subscribers"},xa={key:0,class:"nosubscribers"},_a=["onClick"],Ta=["src"],La={class:"userAndIntro"},Na={class:"user"},Sa={class:"name"},$a={class:"gender male"},Da=[fa((()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-nanxing"})],-1)))],wa={class:"gender female"},Pa=[fa((()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-nvxing"})],-1)))],Aa={class:"pagination"},ja=c(a({__name:"Subscribers",setup(a){const e=f(),n=p();let d=y(0),c=y(1),r=y(60),g=y();const b=()=>{g.value=[],A.getPlaylistSubscribers({id:e.params.id,limit:r.value,offset:(c.value-1)*r.value}).then((a=>{d.value=a.total,g.value=a.subscribers}))};return b(),h((()=>c.value),(()=>{b()})),(a,e)=>{const p=w;return l(),s("div",Ca,[u(g).length?m("",!0):(l(),s("div",xa,"暂无收藏者")),(l(!0),s(i,null,t(u(g),((a,e)=>(l(),s("div",{class:"subscriber",key:e,onClick:e=>u(n).push(`/user/${null==a?void 0:a.userId}`)},[o("img",{src:`${null==a?void 0:a.avatarUrl}?param=110y110`},null,8,Ta),o("div",La,[o("div",Na,[o("div",Sa,v(null==a?void 0:a.nickname),1),C(o("div",$a,Da,512),[[x,1===(null==a?void 0:a.gender)]]),C(o("div",wa,Pa,512),[[x,2===(null==a?void 0:a.gender)]])]),C(o("div",{class:"intro"},v(null==a?void 0:a.signature),513),[[x,null==a?void 0:a.signature]])])],8,_a)))),128)),o("div",Aa,[k(p,{small:"",background:"",layout:"prev, pager, next",total:u(d),"page-size":u(r),"current-page":u(c),"onUpdate:current-page":e[0]||(e[0]=a=>I(c)?c.value=a:c=a),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-97c5b7c8"]]),za=a=>(g("data-v-c556eb2a"),a=a(),b(),a),Ua={id:"songList"},Ba={class:"header"},Ra={class:"songListImg"},qa=["src"],Ea={class:"detail"},Fa={class:"title"},Ga=za((()=>o("div",{class:"alias"},"歌单",-1))),Ha={class:"name"},Ma=za((()=>o("div",{class:"edit iconItem"},null,-1))),Oa={class:"creater"},Va={class:"createrImg"},Ya=["src"],Ja={class:"time"},Ka={class:"tool"},Qa={class:"introduce"},Wa={class:"tags"},Xa=za((()=>o("span",{class:"introduceTitle"},"标签 : ",-1))),Za={class:"tagContent"},ae={class:"tagContent"},ee={class:"tagItem"},le={class:"item"},se={class:"gap"},ie={class:"songsCount"},te=za((()=>o("span",{class:"introduceTitle"},"歌曲 : ",-1))),ne={class:"playTime"},de=za((()=>o("span",{class:"introduceTitle"},"播放 : ",-1))),oe={class:"brief"},ve=za((()=>o("span",{class:"introduceTitle"},"简介 : ",-1))),ce={class:"briefContent"},re={class:"navigate"},ue=c(a({__name:"SongListView",setup(a){const e=f(),n=y();_();let c=y(!1),r=y(!1);h((()=>e.params.id),(()=>{var a;p.value=1,g.value=[],b.value=[],w(),null==(a=n.value)||a.getComment()}));let p=y(1),g=y(),b=y([]);const w=()=>{A.getPlaylistDetail({id:e.params.id}).then((a=>{var l,s,i,t,n,d,o;if(g.value=a.playlist,((null==(s=null==(l=g.value)?void 0:l.description)?void 0:s.split("\n").length)>=2||(null==(t=null==(i=g.value)?void 0:i.description)?void 0:t.length)>70)&&(c.value=!0,r.value=!1),null==(d=null==(n=g.value)?void 0:n.trackIds)?void 0:d.length){let a=null==(o=g.value)?void 0:o.trackIds.map((a=>a.id));N.getSongDetail({ids:a.join(",")}).then((a=>{b.value=a.songs.map((a=>{var l;return{id:a.id,songName:a.name,singer:a.ar[0].name,source:e.params.id,sourceType:2,playListName:null==(l=g.value)?void 0:l.name,albumName:a.al.name,time:S(a.dt/1e3)}}))}))}})).catch((a=>{$.replace("/")}))};w();const j=a=>{let e=new Date(a);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`};return(a,e)=>{var y,h,f,_,N,S,w,A,z,U,B,R,q,E,F,G,H,M,V,Y,K,Q,W,X,Z;return l(),s("div",Ua,[o("div",Ba,[o("div",Ra,[o("img",{src:null==(y=u(g))?void 0:y.coverImgUrl,alt:"",srcset:""},null,8,qa)]),o("div",Ea,[o("div",Fa,[Ga,o("div",Ha,v(null==(h=u(g))?void 0:h.name),1),Ma]),o("div",Oa,[C(o("div",Va,[o("img",{src:`${null==(_=null==(f=u(g))?void 0:f.creator)?void 0:_.avatarUrl}?param=100y100`,onClick:e[0]||(e[0]=a=>{var e,l;return u($).push(`/user/${null==(l=null==(e=u(g))?void 0:e.creator)?void 0:l.userId}`)})},null,8,Ya)],512),[[x,null==(S=null==(N=u(g))?void 0:N.creator)?void 0:S.avatarUrl]]),C(o("div",{class:"name",onClick:e[1]||(e[1]=a=>{var e,l;return u($).push(`/user/${null==(l=null==(e=u(g))?void 0:e.creator)?void 0:l.userId}`)})},v(null==(A=null==(w=u(g))?void 0:w.creator)?void 0:A.nickname),513),[[x,null==(U=null==(z=u(g))?void 0:z.creator)?void 0:U.nickname]]),o("div",Ja,v(j(null==(B=u(g))?void 0:B.createTime))+"创建",1)]),o("div",Ka,[k(P,{"play-list":(Z=u(b),Z.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,playListName:a.playListName,time:a.time}))))},null,8,["play-list"])]),o("div",Qa,[C(o("div",Wa,[Xa,C(o("span",Za,"添加标签",512),[[x,!(null==(q=null==(R=u(g))?void 0:R.tags)?void 0:q.length)]]),C(o("span",ae,[(l(!0),s(i,null,t(null==(E=u(g))?void 0:E.tags,((a,e)=>{var i,t;return l(),s("span",ee,[o("span",le,v(a),1),C(o("span",se," / ",512),[[x,e!=(null==(t=null==(i=u(g))?void 0:i.tags)?void 0:t.length)-1]])])})),256))],512),[[x,null==(G=null==(F=u(g))?void 0:F.tags)?void 0:G.length]])],512),[[x,5!=(null==(H=u(g))?void 0:H.specialType)]]),o("div",ie,[te,T(v(null==(M=u(g))?void 0:M.trackCount),1)]),o("div",ne,[de,T(v(u(D)(null==(V=u(g))?void 0:V.playCount)),1)]),C(o("div",oe,[ve,C(o("span",null,"添加简介",512),[[x,!(null==(Y=u(g))?void 0:Y.description)]]),C(o("div",{class:d(["moreBrief",{briefShort:!u(r)}])},[o("span",ce,v(null==(K=u(g))?void 0:K.description),1),u(c)&&!u(r)?(l(),s("span",{key:0,class:"showMore",onClick:e[2]||(e[2]=a=>I(r)?r.value=!0:r=!0)})):m("",!0),u(c)&&u(r)?(l(),s("span",{key:1,class:"showLess",onClick:e[3]||(e[3]=a=>I(r)?r.value=!1:r=!1)})):m("",!0)],2),[[x,null==(Q=u(g))?void 0:Q.description]])],512),[[x,5!=(null==(W=u(g))?void 0:W.specialType)]])])])]),o("div",re,[o("div",{class:d(["songPlayList",{isSelected:1===u(p)}]),onClick:e[4]||(e[4]=a=>I(p)?p.value=1:p=1)},"歌曲列表 ",2),o("div",{class:d(["comment",{isSelected:2===u(p)}]),onClick:e[5]||(e[5]=a=>I(p)?p.value=2:p=2)},"评论("+v((null==(X=u(g))?void 0:X.commentCount)||0)+")",3),o("div",{class:d(["collecter",{isSelected:3===u(p)}]),onClick:e[6]||(e[6]=a=>I(p)?p.value=3:p=3)},"收藏者 ",2)]),C(k(O,{"play-list-detail":u(b)},null,8,["play-list-detail"]),[[x,1===u(p)]]),2===u(p)?(l(),L(Ia,{key:0,type:u(J).playlist,ref_key:"commentRef",ref:n},null,8,["type"])):m("",!0),3===u(p)?(l(),L(ja,{key:1})):m("",!0)])}}}),[["__scopeId","data-v-c556eb2a"]]);export{ue as default};
