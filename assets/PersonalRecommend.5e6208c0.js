import{b2 as e,aD as a,ax as t,b3 as l,b4 as n,a0 as s,ab as i,r as o,a3 as r,u,l as c,ag as d,ad as v,a4 as m,p,aF as h,at as f,d as g,a1 as y,o as b,c as I,a as k,g as C,w,m as x,n as _,ao as L,b as M,ap as S,a_ as E,v as T,a7 as $,y as N,a$ as R,ai as A,J as D,F as B,q as j,t as P,a8 as H,i as U,af as z,b5 as O,b6 as V,ak as q,aU as F,L as G,C as W,D as J,E as K,j as X,_ as Y,G as Q,k as Z,e as ee,z as ae,A as te}from"./index.06d35deb.js";import{r as le}from"./recommendApi.495e5500.js";import{p as ne}from"./playListApi.188b90fa.js";function se(t,l,n){var s=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),a(t,l,{leading:s,maxWait:l,trailing:i})}const ie=Symbol("carouselContextKey"),oe=(e,a)=>{const s={},i=t([]);return{children:i,addChild:t=>{s[t.uid]=t,i.value=((e,a,t)=>l(e.subTree).filter((e=>{var t;return n(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component})).map((e=>e.component.uid)).map((e=>t[e])).filter((e=>!!e)))(e,a,s)},removeChild:e=>{delete s[e],i.value=i.value.filter((a=>a.uid!==e))}}},re=s({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ue={change:(e,a)=>[e,a].every(i)},ce=(e,a,l)=>{const{children:n,addChild:s,removeChild:i}=oe(f(),"ElCarouselItem"),g=o(-1),y=o(null),b=o(!1),I=o(),k=r((()=>"never"!==e.arrow&&!u(x))),C=r((()=>n.value.some((e=>e.props.label.toString().length>0)))),w=r((()=>"card"===e.type)),x=r((()=>"vertical"===e.direction)),_=se((e=>{T(e)}),300,{trailing:!0}),L=se((a=>{!function(a){"hover"===e.trigger&&a!==g.value&&(g.value=a)}(a)}),300);function M(){y.value&&(clearInterval(y.value),y.value=null)}function S(){e.interval<=0||!e.autoplay||y.value||(y.value=setInterval((()=>E()),e.interval))}const E=()=>{g.value<n.value.length-1?g.value=g.value+1:e.loop&&(g.value=0)};function T(a){if(h(a)){const e=n.value.filter((e=>e.props.name===a));e.length>0&&(a=n.value.indexOf(e[0]))}if(a=Number(a),Number.isNaN(a)||a!==Math.floor(a))return;const t=n.value.length,l=g.value;g.value=a<0?e.loop?t-1:0:a>=t?e.loop?0:t-1:a,l===g.value&&$(l),N()}function $(e){n.value.forEach(((a,t)=>{a.translateItem(t,g.value,e)}))}function N(){M(),S()}c((()=>g.value),((e,t)=>{$(t),t>-1&&a("change",e,t)})),c((()=>e.autoplay),(e=>{e?S():M()})),c((()=>e.loop),(()=>{T(g.value)})),c((()=>e.interval),(()=>{N()})),c((()=>n.value),(()=>{n.value.length>0&&T(e.initialIndex)}));const R=t();return d((()=>{R.value=v(I.value,(()=>{$()})),S()})),m((()=>{M(),I.value&&R.value&&R.value.stop()})),p(ie,{root:I,isCardType:w,isVertical:x,items:n,loop:e.loop,addItem:s,removeItem:i,setActiveItem:T}),{root:I,activeIndex:g,arrowDisplay:k,hasLabel:C,hover:b,isCardType:w,items:n,handleButtonEnter:function(e){u(x)||n.value.forEach(((a,t)=>{e===function(e,a){var t,l,s,i;const o=u(n),r=o.length;if(0===r||!e.states.inStage)return!1;const c=a+1,d=a-1,v=r-1,m=o[v].states.active,p=o[0].states.active,h=null==(l=null==(t=o[c])?void 0:t.states)?void 0:l.active,f=null==(i=null==(s=o[d])?void 0:s.states)?void 0:i.active;return a===v&&p||h?"left":!!(0===a&&m||f)&&"right"}(a,t)&&(a.states.hover=!0)}))},handleButtonLeave:function(){u(x)||n.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){g.value=e},handleMouseEnter:function(){b.value=!0,e.pauseOnHover&&M()},handleMouseLeave:function(){b.value=!1,S()},setActiveItem:T,prev:function(){T(g.value-1)},next:function(){T(g.value+1)},throttledArrowClick:_,throttledIndicatorHover:L}},de=["onMouseenter","onClick"],ve={key:0},me=g({name:"ElCarousel"});var pe=H(g({...me,props:re,emits:ue,setup(e,{expose:a,emit:t}){const l=e,{root:n,activeIndex:s,arrowDisplay:i,hasLabel:o,hover:c,isCardType:d,items:v,handleButtonEnter:m,handleButtonLeave:p,handleIndicatorClick:h,handleMouseEnter:f,handleMouseLeave:g,setActiveItem:H,prev:U,next:z,throttledArrowClick:O,throttledIndicatorHover:V}=ce(l,t),q=y("carousel"),F=r((()=>{const e=[q.b(),q.m(l.direction)];return u(d)&&e.push(q.m("card")),e})),G=r((()=>{const e=[q.e("indicators"),q.em("indicators",l.direction)];return u(o)&&e.push(q.em("indicators","labels")),("outside"===l.indicatorPosition||u(d))&&e.push(q.em("indicators","outside")),e}));return a({setActiveItem:H,prev:U,next:z}),(e,a)=>(b(),I("div",{ref_key:"root",ref:n,class:_(u(F)),onMouseenter:a[6]||(a[6]=L(((...e)=>u(f)&&u(f)(...e)),["stop"])),onMouseleave:a[7]||(a[7]=L(((...e)=>u(g)&&u(g)(...e)),["stop"]))},[k("div",{class:_(u(q).e("container")),style:D({height:e.height})},[u(i)?(b(),C($,{key:0,name:"carousel-arrow-left",persisted:""},{default:w((()=>[x(k("button",{type:"button",class:_([u(q).e("arrow"),u(q).em("arrow","left")]),onMouseenter:a[0]||(a[0]=e=>u(m)("left")),onMouseleave:a[1]||(a[1]=(...e)=>u(p)&&u(p)(...e)),onClick:a[2]||(a[2]=L((e=>u(O)(u(s)-1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(E))])),_:1})],34),[[T,("always"===e.arrow||u(c))&&(l.loop||u(s)>0)]])])),_:1})):N("v-if",!0),u(i)?(b(),C($,{key:1,name:"carousel-arrow-right",persisted:""},{default:w((()=>[x(k("button",{type:"button",class:_([u(q).e("arrow"),u(q).em("arrow","right")]),onMouseenter:a[3]||(a[3]=e=>u(m)("right")),onMouseleave:a[4]||(a[4]=(...e)=>u(p)&&u(p)(...e)),onClick:a[5]||(a[5]=L((e=>u(O)(u(s)+1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(R))])),_:1})],34),[[T,("always"===e.arrow||u(c))&&(l.loop||u(s)<u(v).length-1)]])])),_:1})):N("v-if",!0),A(e.$slots,"default")],6),"none"!==e.indicatorPosition?(b(),I("ul",{key:0,class:_(u(G))},[(b(!0),I(B,null,j(u(v),((a,t)=>(b(),I("li",{key:t,class:_([u(q).e("indicator"),u(q).em("indicator",e.direction),u(q).is("active",t===u(s))]),onMouseenter:e=>u(V)(t),onClick:L((e=>u(h)(t)),["stop"])},[k("button",{class:_(u(q).e("button"))},[u(o)?(b(),I("span",ve,P(a.props.label),1)):N("v-if",!0)],2)],42,de)))),128))],2)):N("v-if",!0)],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const he=s({name:{type:String,default:""},label:{type:[String,Number],default:""}}),fe=(e,a)=>{const t=U(ie),l=f(),n=.83,s=o(!1),i=o(0),r=o(1),c=o(!1),v=o(!1),m=o(!1),p=o(!1),{isCardType:h,isVertical:g}=t;const y=(e,a,l)=>{var s;const o=u(h),d=null!=(s=t.items.value.length)?s:Number.NaN,f=e===a;o||V(l)||(p.value=f||e===l),!f&&d>2&&t.loop&&(e=function(e,a,t){const l=t-1,n=t/2;return 0===a&&e===l?-1:a===l&&0===e?t:e<a-1&&a-e>=n?t+1:e>a+1&&e-a>=n?-2:e}(e,a,d));const y=u(g);c.value=f,o?(m.value=Math.round(Math.abs(e-a))<=1,i.value=function(e,a){var l;const n=(null==(l=t.root.value)?void 0:l.offsetWidth)||0;return m.value?n*(1.17*(e-a)+1)/4:e<a?-1.83*n/4:3.83*n/4}(e,a),r.value=u(c)?1:n):i.value=function(e,a,l){const n=t.root.value;return n?((l?n.offsetHeight:n.offsetWidth)||0)*(e-a):0}(e,a,y),v.value=!0};return d((()=>{t.addItem({props:e,states:z({hover:s,translate:i,scale:r,active:c,ready:v,inStage:m,animating:p}),uid:l.uid,translateItem:y})})),O((()=>{t.removeItem(l.uid)})),{active:c,animating:p,hover:s,inStage:m,isVertical:g,translate:i,isCardType:h,scale:r,ready:v,handleItemClick:function(){if(t&&u(h)){const e=t.items.value.findIndex((({uid:e})=>e===l.uid));t.setActiveItem(e)}}}},ge=g({name:"ElCarouselItem"});var ye=H(g({...ge,props:he,setup(e){const a=e,t=y("carousel"),{active:l,animating:n,hover:s,inStage:i,isVertical:o,translate:c,isCardType:d,scale:v,ready:m,handleItemClick:p}=fe(a),h=r((()=>({transform:[`${"translate"+(u(o)?"Y":"X")}(${u(c)}px)`,`scale(${u(v)})`].join(" ")})));return(e,a)=>x((b(),I("div",{class:_([u(t).e("item"),u(t).is("active",u(l)),u(t).is("in-stage",u(i)),u(t).is("hover",u(s)),u(t).is("animating",u(n)),{[u(t).em("item","card")]:u(d)}]),style:D(u(h)),onClick:a[0]||(a[0]=(...e)=>u(p)&&u(p)(...e))},[u(d)?x((b(),I("div",{key:0,class:_(u(t).e("mask"))},null,2)),[[T,!u(l)]]):N("v-if",!0),A(e.$slots,"default")],6)),[[T,u(m)]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const be=q(pe,{CarouselItem:ye}),Ie=F(ye),ke=e=>G({url:"/banner",method:"GET",params:{type:e}}),Ce=""+new URL("dailyRecommend.26e6fdeb.jpg",import.meta.url).href,we=e=>(J("data-v-03c167dc"),e=e(),K(),e),xe={class:"img"},_e=we((()=>k("img",{src:Ce},null,-1))),Le={class:"calendar"},Me={class:"body"},Se=we((()=>k("div",{class:"header left"},null,-1))),Ee=we((()=>k("div",{class:"header right"},null,-1))),Te=we((()=>k("div",{class:"gap"},null,-1))),$e={class:"date"},Ne=we((()=>k("div",{class:"playIcon"},[k("svg",{class:"icon","aria-hidden":"true"},[k("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Re=we((()=>k("div",{class:"tip"},"根据你的音乐口味生成每日更新",-1))),Ae=we((()=>k("div",{class:"title"},"每日歌曲推荐",-1))),De=["onClick"],Be={class:"img"},je=["src"],Pe={class:"playCount"},He=we((()=>k("div",{class:"iconItem"},[k("svg",{class:"icon","aria-hidden":"true"},[k("use",{"xlink:href":"#icon-bofang"})])],-1))),Ue={class:"count"},ze=we((()=>k("div",{class:"playIcon"},[k("svg",{class:"icon","aria-hidden":"true"},[k("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Oe={class:"title"},Ve=Y(g({__name:"RecommendItem",props:{itmeLineCount:{type:Number,required:!0,default:5},playList:{type:Array,required:!0},showDailyRecommend:{type:Boolean,default:!1}},setup(e){const a=e,t=X();let l=[1287293193,1463586082],n=o();c((()=>a.playList),(async()=>{let e=a.playList;for(let a=0;a<(null==e?void 0:e.length);a++){let t=e[a];-1!=l.indexOf(t.userId)&&await ne.getPlaylistDetail({id:t.id}).then((t=>{e.splice(a,1,t.playlist)}))}n.value=e}),{immediate:!0});const s=e=>(e+1+(a.showDailyRecommend?1:0))%a.itmeLineCount==0;return(l,i)=>(b(),I("div",{id:"recommendItem",style:D({"--itmeLineCount":a.itmeLineCount})},[e.showDailyRecommend?(b(),I("div",{key:0,class:"item dailyRecommend",onClick:i[0]||(i[0]=e=>u(t).push("/dailysongs"))},[k("div",xe,[_e,k("div",Le,[k("div",Me,[Se,Ee,Te,k("div",$e,P((new Date).getDate()),1)])]),Ne,Re]),Ae])):N("",!0),(b(!0),I(B,null,j(u(n),((e,a)=>(b(),I("div",{class:_(["item",{clearMarginRight:s(a)}]),onClick:a=>u(t).push(`/songlist/${null==e?void 0:e.id}`)},[k("div",Be,[k("img",{src:`${(null==e?void 0:e.picUrl)||(null==e?void 0:e.coverImgUrl)}?param=300y300`},null,8,je),k("div",Pe,[He,k("div",Ue,P(u(W)((null==e?void 0:e.playcount)||(null==e?void 0:e.playCount)||0)),1)]),ze]),k("div",Oe,P(null==e?void 0:e.name),1)],10,De)))),256))],4))}}),[["__scopeId","data-v-03c167dc"]]),qe=()=>G({url:"/dj/personalize/recommend",method:"GET"}),Fe={id:"personalRecommend"},Ge={class:"banner"},We=["src","onClick"],Je={class:"recommendPlayList recommendChildren"},Ke={class:"playList"},Xe=Y(g({__name:"PersonalRecommend",setup(e){const a=Q(),t=X(),l=ee();Z();let n=o([]);le.getRecommendResource().then((e=>{var a;n.value=null==(a=e.recommend)?void 0:a.slice(0,9)})),qe().then((e=>{}));let s=o([]);ke().then((e=>{s.value=e.banners}));return U("changeFindMusicIsSelectedIndex")(l.meta.selectedIndex),(e,l)=>{const i=Ie,o=be;return b(),I("div",Fe,[k("div",Ge,[M(o,{interval:3500,type:"card",height:"204px"},{default:w((()=>[(b(!0),I(B,null,j(u(s),((e,l)=>(b(),C(i,{key:l},{default:w((()=>[k("img",{class:"bannerImg",src:`${e.imageUrl}?param=1100y408`,height:"204",onClick:l=>(e=>{switch(e.targetType){case 1:ae.getSongDetail({ids:e.targetId}).then((e=>{let t=e.songs[0];a.appendSongToPlayLsit([{id:t.id,songName:t.name,singer:t.ar[0].name,sourceType:3,source:"banner",time:te(t.dt/1e3)}],!0)}));break;case 10:t.push(`/album/${e.targetId}`);break;case 1e3:t.push(`/songlist/${e.targetId}`);break;case 3e3:window.open(`${e.url}`)}})(e)},null,8,We),k("span",{class:"bannerTitle",style:D(`background-color:${e.titleColor}`)},P(e.typeTitle),5)])),_:2},1024)))),128))])),_:1})]),k("div",Je,[k("div",{class:"title",onClick:l[0]||(l[0]=e=>u(t).push("/findmusic/playlist"))},"推荐歌单"),k("div",Ke,[M(Ve,{"itme-line-count":5,"play-list":u(n),"show-daily-recommend":!0},null,8,["play-list"])])])])}}}),[["__scopeId","data-v-6147b6d6"]]);export{Xe as default};
