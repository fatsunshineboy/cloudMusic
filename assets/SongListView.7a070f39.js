import{d as a,g as e,o as l,c as s,F as i,h as t,i as n,n as d,a as o,t as v,_ as c,j as r,u,k as m,e as p,p as g,l as b,r as y,w as h,b as k,m as I,q as C,s as f,v as x,x as _,y as T,z as L,A as N,B as S,C as $}from"./index.8969ea41.js";import{E as w,P as D}from"./PlayAllAndDownloadAll.87269915.js";const P={id:"songPlayList"},j=n('<div id="title" data-v-8ed6a72c><div class="action" data-v-8ed6a72c>操作</div><div class="title" data-v-8ed6a72c>标题</div><div class="songer" data-v-8ed6a72c>歌手</div><div class="album" data-v-8ed6a72c>专辑</div><div class="time" data-v-8ed6a72c>时间</div></div>',1),A=["onDblclick"],z={class:"tool"},U={class:"order"},B=n('<div class="favourite" data-v-8ed6a72c><div class="iconItem" data-v-8ed6a72c><svg class="icon" aria-hidden="true" data-v-8ed6a72c><use xlink:href="#icon-aixin" data-v-8ed6a72c></use></svg></div></div><div class="download" data-v-8ed6a72c><div class="iconItem" data-v-8ed6a72c><svg class="icon" aria-hidden="true" data-v-8ed6a72c><use xlink:href="#icon-xiazai1" data-v-8ed6a72c></use></svg></div></div>',2),E={class:"content"},R={class:"title"},q={class:"songer"},G={class:"album"},F={class:"time"},H=c(a({__name:"SongPlayList",props:["playListDetail"],setup(a){const n=a,c=e(),r=a=>a<10?"0"+(a+1):a+"";return(a,e)=>(l(),s("div",P,[j,(l(!0),s(i,null,t(n.playListDetail,((a,e)=>(l(),s("div",{class:d(["singleItem",{bgColor:e%2==0}]),key:e,onDblclick:a=>(a=>{c.setPlayList(n.playListDetail.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,playListName:a.playListName,time:a.time})))),c.setNowToPlayId(a)})(e)},[o("div",z,[o("div",U,v(r(e)),1),B]),o("div",E,[o("div",R,v(a.songName),1),o("div",q,v(a.singer),1),o("div",G,v(a.albumName),1),o("div",F,v(a.time),1)])],42,A)))),128))]))}}),[["__scopeId","data-v-8ed6a72c"]]),M=a=>r({url:`/comment/playlist?timerstamp=${Date.now()}`,method:"GET",params:a}),O=a=>r({url:`/comment/like?timerstamp=${Date.now()}`,method:"GET",params:a});var V=(a=>(a[a.song=0]="song",a[a.mv=1]="mv",a[a.playlist=2]="playlist",a[a.album=3]="album",a[a.radiioStationProgram=4]="radiioStationProgram",a[a.video=5]="video",a[a.post=6]="post",a[a.radiioStation=7]="radiioStation",a))(V||{});const Y={class:"contentItem"},J=["src"],K={class:"detail"},Q={class:"nameAndText"},W={class:"text"},X={key:0,id:"reply"},Z={class:"text"},aa={class:"timeAndTool"},ea={class:"time"},la={class:"commentTool"},sa=(a=>(g("data-v-a7de5339"),a=a(),b(),a))((()=>o("div",{class:"support"},[o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-dianzan"})])],-1))),ia={class:"supportCount"},ta=n('<div class="gap" data-v-a7de5339>|</div><div class="share" data-v-a7de5339><svg class="icon" aria-hidden="true" data-v-a7de5339><use xlink:href="#icon-fenxiang" data-v-a7de5339></use></svg></div><div class="gap" data-v-a7de5339>|</div><div class="reply" data-v-a7de5339><svg class="icon" aria-hidden="true" data-v-a7de5339><use xlink:href="#icon-pinglun" data-v-a7de5339></use></svg></div>',4),na=c(a({__name:"Comment",props:{commentItem:{type:Object,required:!0},likeCommentButton:{type:Function,required:!0}},setup(a){const e=p();return(i,t)=>{var n,d,c,r,p,g,b,y,h,k,I,C,f,x;return l(),s("div",Y,[o("img",{src:`${null==(d=null==(n=a.commentItem)?void 0:n.user)?void 0:d.avatarUrl}?param=60y60`,onClick:t[0]||(t[0]=l=>{var s,i;return u(e).push(`/user/${null==(i=null==(s=a.commentItem)?void 0:s.user)?void 0:i.userId}`)})},null,8,J),o("div",K,[o("div",Q,[o("span",{class:"name",onClick:t[1]||(t[1]=l=>{var s,i;return u(e).push(`/user/${null==(i=null==(s=a.commentItem)?void 0:s.user)?void 0:i.userId}`)})},v(null==(r=null==(c=a.commentItem)?void 0:c.user)?void 0:r.nickname),1),o("span",W," : "+v(null==(p=a.commentItem)?void 0:p.content),1)]),(null==(b=null==(g=a.commentItem)?void 0:g.beReplied)?void 0:b.length)?(l(),s("div",X,[o("div",{class:"name",onClick:t[2]||(t[2]=l=>{var s,i,t;return u(e).push(`/user/${null==(t=null==(i=null==(s=a.commentItem)?void 0:s.beReplied[0])?void 0:i.user)?void 0:t.userId}`)})},"@"+v(null==(k=null==(h=null==(y=a.commentItem)?void 0:y.beReplied[0])?void 0:h.user)?void 0:k.nickname),1),o("div",Z," : "+v(null==(C=null==(I=a.commentItem)?void 0:I.beReplied[0])?void 0:C.content),1)])):m("",!0),o("div",aa,[o("div",ea,v(null==(f=a.commentItem)?void 0:f.timeStr),1),o("div",la,[o("div",{class:"supportAndCount",onClick:t[3]||(t[3]=e=>{var l,s;return a.likeCommentButton(null==(l=a.commentItem)?void 0:l.commentId,(null==(s=a.commentItem)?void 0:s.liked)?0:1)})},[sa,o("span",ia,v(null==(x=a.commentItem)?void 0:x.likedCount),1)]),ta])])])])}}}),[["__scopeId","data-v-a7de5339"]]),da=a=>(g("data-v-1033bb6d"),a=a(),b(),a),oa={id:"comment"},va=n('<textarea class="textarea customeScroll" name="saysths" rows="3" wrap="soft" data-v-1033bb6d></textarea><div class="tool" data-v-1033bb6d><div class="iconItem" data-v-1033bb6d><div class="topic" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-hashjinghao" data-v-1033bb6d></use></svg></div><div class="at" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-aite1" data-v-1033bb6d></use></svg></div><div class="emoji" data-v-1033bb6d><svg class="icon" aria-hidden="true" data-v-1033bb6d><use xlink:href="#icon-xiaolian1" data-v-1033bb6d></use></svg></div></div><div class="sendComment" data-v-1033bb6d>评论</div></div>',2),ca={class:"content"},ra={key:0,class:"noComment"},ua={key:1,class:"hotComment"},ma=da((()=>o("div",{class:"title"},"精彩评论",-1))),pa={key:2,class:"moreHotComment"},ga={key:3,class:"latestComment"},ba={class:"title"},ya={class:"pagination"},ha=c(a({__name:"Comment",props:{type:{type:Number,required:!0}},setup(a,{expose:e}){const n=a,c=C();let r=y(),p=y(),g=y(),b=y(0),f=y(1),x=y(100);const _=(a,e)=>{O({id:c.params.id,cid:a,t:e,type:n.type}).then((a=>{T()}))},T=()=>{if(n.type===V.playlist)L(x.value,(f.value-1)*x.value)},L=(a,e,l)=>{M({id:c.params.id,limit:a,offset:e}).then((a=>{var e;r.value=null==a?void 0:a.comments,b.value=a.total,p.value=null==(e=null==a?void 0:a.hotComments)?void 0:e.slice(0,10),g.value=null==a?void 0:a.moreHot}))};return h((()=>f.value),(()=>{r.value=[],p.value=[],T()}),{immediate:!0}),e({getComment:T}),(a,e)=>{var n,c,y,h,C;const T=w;return l(),s("div",oa,[va,o("div",ca,[(null==(n=u(r))?void 0:n.length)||(null==(c=u(p))?void 0:c.length)?m("",!0):(l(),s("div",ra," 还没有评论，快来抢沙发~ ")),(null==(y=u(p))?void 0:y.length)?(l(),s("div",ua,[ma,(l(!0),s(i,null,t(u(p),((a,e)=>(l(),s("div",{class:"contentItem borderBottom",key:e},[k(na,{"comment-item":a,"like-comment-button":_},null,8,["comment-item"])])))),128))])):m("",!0),(null==(h=u(p))?void 0:h.length)&&u(g)?(l(),s("div",pa," 更多精彩评论 > ")):m("",!0),(null==(C=u(r))?void 0:C.length)?(l(),s("div",ga,[o("div",ba,"最新评论("+v(u(b))+")",1),(l(!0),s(i,null,t(u(r),((a,e)=>{var i;return l(),s("div",{class:d(["contentItem",{borderBottom:e!=(null==(i=u(r))?void 0:i.length)-1}]),key:e},[k(na,{"comment-item":a,"like-comment-button":_},null,8,["comment-item"])],2)})),128))])):m("",!0),o("div",ya,[k(T,{small:"",background:"",layout:"prev, pager, next",total:u(b),"page-size":u(x),"current-page":u(f),"onUpdate:current-page":e[0]||(e[0]=a=>I(f)?f.value=a:f=a),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])])}}}),[["__scopeId","data-v-1033bb6d"]]),ka=a=>r({url:"/playlist/detail",method:"GET",params:a}),Ia=a=>r({url:"/playlist/subscribers",method:"GET",params:a}),Ca=a=>(g("data-v-97c5b7c8"),a=a(),b(),a),fa={id:"subscribers"},xa={key:0,class:"nosubscribers"},_a=["onClick"],Ta=["src"],La={class:"userAndIntro"},Na={class:"user"},Sa={class:"name"},$a={class:"gender male"},wa=[Ca((()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-nanxing"})],-1)))],Da={class:"gender female"},Pa=[Ca((()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-nvxing"})],-1)))],ja={class:"pagination"},Aa=c(a({__name:"Subscribers",setup(a){const e=C(),n=p();let d=y(0),c=y(1),r=y(60),g=y();const b=()=>{g.value=[],Ia({id:e.params.id,limit:r.value,offset:(c.value-1)*r.value}).then((a=>{d.value=a.total,g.value=a.subscribers}))};return b(),h((()=>c.value),(()=>{b()})),(a,e)=>{const p=w;return l(),s("div",fa,[u(g).length?m("",!0):(l(),s("div",xa,"暂无收藏者")),(l(!0),s(i,null,t(u(g),((a,e)=>(l(),s("div",{class:"subscriber",key:e,onClick:e=>u(n).push(`/user/${null==a?void 0:a.userId}`)},[o("img",{src:`${null==a?void 0:a.avatarUrl}?param=110y110`},null,8,Ta),o("div",La,[o("div",Na,[o("div",Sa,v(null==a?void 0:a.nickname),1),f(o("div",$a,wa,512),[[x,1===(null==a?void 0:a.gender)]]),f(o("div",Da,Pa,512),[[x,2===(null==a?void 0:a.gender)]])]),f(o("div",{class:"intro"},v(null==a?void 0:a.signature),513),[[x,null==a?void 0:a.signature]])])],8,_a)))),128)),o("div",ja,[k(p,{small:"",background:"",layout:"prev, pager, next",total:u(d),"page-size":u(r),"current-page":u(c),"onUpdate:current-page":e[0]||(e[0]=a=>I(c)?c.value=a:c=a),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-97c5b7c8"]]),za=a=>(g("data-v-f998fda0"),a=a(),b(),a),Ua={id:"songList"},Ba={class:"header"},Ea={class:"songListImg"},Ra=["src"],qa={class:"detail"},Ga={class:"title"},Fa=za((()=>o("div",{class:"alias"},"歌单",-1))),Ha={class:"name"},Ma=za((()=>o("div",{class:"edit iconItem"},null,-1))),Oa={class:"creater"},Va={class:"createrImg"},Ya=["src"],Ja={class:"time"},Ka={class:"tool"},Qa={class:"introduce"},Wa={class:"tags"},Xa=za((()=>o("span",{class:"introduceTitle"},"标签 : ",-1))),Za={class:"songsCount"},ae=za((()=>o("span",{class:"introduceTitle"},"歌曲 : ",-1))),ee={class:"playTime"},le=za((()=>o("span",{class:"introduceTitle"},"播放 : ",-1))),se={class:"brief"},ie=za((()=>o("span",{class:"introduceTitle"},"简介 : ",-1))),te={class:"briefContent"},ne={class:"navigate"},de=c(a({__name:"SongListView",setup(a){const e=C(),i=y();let t=y(!1),n=y(!1);h((()=>e.params.id),(()=>{var a;c.value=1,r.value=[],g(),null==(a=i.value)||a.getComment()}));let c=y(1),r=y(),p=y([]);const g=()=>{ka({id:e.params.id}).then((a=>{var l,s,i,d,o;if(r.value=a.playlist,(null==(s=null==(l=r.value)?void 0:l.description)?void 0:s.split("\n").length)>=2&&(t.value=!0,n.value=!1),null==(d=null==(i=r.value)?void 0:i.trackIds)?void 0:d.length){let a=null==(o=r.value)?void 0:o.trackIds.map((a=>a.id));L.getSongDetail({ids:a.join(",")}).then((a=>{p.value=a.songs.map((a=>{var l;return{id:a.id,songName:a.name,singer:a.ar[0].name,source:e.params.id,sourceType:2,playListName:null==(l=r.value)?void 0:l.name,albumName:a.al.name,time:N(a.dt/1e3)}}))}))}})).catch((a=>{S.replace("/")}))};g();const b=a=>{let e=new Date(a);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`};return(a,e)=>{var g,y,h,C,L,N,w,P,j,A,z,U,B,E,R,q,G,F,M,O,Y,J,K,Q,W,X;return l(),s("div",Ua,[o("div",Ba,[o("div",Ea,[o("img",{src:null==(g=u(r))?void 0:g.coverImgUrl,alt:"",srcset:""},null,8,Ra)]),o("div",qa,[o("div",Ga,[Fa,o("div",Ha,v(null==(y=u(r))?void 0:y.name),1),Ma]),o("div",Oa,[f(o("div",Va,[o("img",{src:`${null==(C=null==(h=u(r))?void 0:h.creator)?void 0:C.avatarUrl}?param=100y100`,onClick:e[0]||(e[0]=a=>{var e,l;return u(S).push(`/user/${null==(l=null==(e=u(r))?void 0:e.creator)?void 0:l.userId}`)})},null,8,Ya)],512),[[x,null==(N=null==(L=u(r))?void 0:L.creator)?void 0:N.avatarUrl]]),f(o("div",{class:"name",onClick:e[1]||(e[1]=a=>{var e,l;return u(S).push(`/user/${null==(l=null==(e=u(r))?void 0:e.creator)?void 0:l.userId}`)})},v(null==(P=null==(w=u(r))?void 0:w.creator)?void 0:P.nickname),513),[[x,null==(A=null==(j=u(r))?void 0:j.creator)?void 0:A.nickname]]),o("div",Ja,v(b(null==(z=u(r))?void 0:z.createTime))+"创建",1)]),o("div",Ka,[k(D,{"play-list":(X=u(p),X.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,playListName:a.playListName,time:a.time}))))},null,8,["play-list"])]),o("div",Qa,[f(o("div",Wa,[Xa,f(o("span",null,"添加标签",512),[[x,!(null==(B=null==(U=u(r))?void 0:U.tags)?void 0:B.length)]]),f(o("span",null,v(null==(R=null==(E=u(r))?void 0:E.tags)?void 0:R.join(" / ")),513),[[x,null==(G=null==(q=u(r))?void 0:q.tags)?void 0:G.length]])],512),[[x,5!=(null==(F=u(r))?void 0:F.specialType)]]),o("div",Za,[ae,_(v(null==(M=u(r))?void 0:M.trackCount),1)]),o("div",ee,[le,_(v(u($)(null==(O=u(r))?void 0:O.playCount)),1)]),f(o("div",se,[ie,f(o("span",null,"添加简介",512),[[x,!(null==(Y=u(r))?void 0:Y.description)]]),f(o("div",{class:d(["moreBrief",{briefShort:!u(n)}])},[o("span",te,v(null==(J=u(r))?void 0:J.description),1),u(t)&&!u(n)?(l(),s("span",{key:0,class:"showMore",onClick:e[2]||(e[2]=a=>I(n)?n.value=!0:n=!0)})):m("",!0),u(t)&&u(n)?(l(),s("span",{key:1,class:"showLess",onClick:e[3]||(e[3]=a=>I(n)?n.value=!1:n=!1)})):m("",!0)],2),[[x,null==(K=u(r))?void 0:K.description]])],512),[[x,5!=(null==(Q=u(r))?void 0:Q.specialType)]])])])]),o("div",ne,[o("div",{class:d(["songPlayList",{isSelected:1===u(c)}]),onClick:e[4]||(e[4]=a=>I(c)?c.value=1:c=1)},"歌曲列表 ",2),o("div",{class:d(["comment",{isSelected:2===u(c)}]),onClick:e[5]||(e[5]=a=>I(c)?c.value=2:c=2)},"评论("+v((null==(W=u(r))?void 0:W.commentCount)||0)+")",3),o("div",{class:d(["collecter",{isSelected:3===u(c)}]),onClick:e[6]||(e[6]=a=>I(c)?c.value=3:c=3)},"收藏者 ",2)]),f(k(H,{"play-list-detail":u(p)},null,8,["play-list-detail"]),[[x,1===u(c)]]),2===u(c)?(l(),T(ha,{key:0,type:u(V).playlist,ref_key:"commentRef",ref:i},null,8,["type"])):m("",!0),3===u(c)?(l(),T(Aa,{key:1})):m("",!0)])}}}),[["__scopeId","data-v-f998fda0"]]);export{de as default};
