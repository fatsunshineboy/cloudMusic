import{b3 as e,aE as a,ay as t,b4 as l,b5 as n,a1 as s,ac as i,r as o,a4 as r,u,k as c,ah as d,ae as v,a5 as m,p,aG as h,au as f,d as g,a2 as y,o as b,c as I,a as C,g as k,w,q as x,n as _,ap as L,b as M,aq as S,a$ as E,v as T,a8 as $,l as N,b0 as R,aj as A,L as B,F as D,m as j,t as P,a9 as H,i as V,ag as q,b6 as z,b7 as G,al as O,aV as U,M as W,G as F,x as K,y as X,j as Y,_ as J,H as Q,z as Z,e as ee,B as ae,C as te,D as le}from"./index.f13d04ae.js";import{r as ne}from"./recommendApi.4fda966e.js";import{p as se}from"./playListApi.1c1cfe1c.js";function ie(t,l,n){var s=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),a(t,l,{leading:s,maxWait:l,trailing:i})}const oe=Symbol("carouselContextKey"),re=(e,a)=>{const s={},i=t([]);return{children:i,addChild:t=>{s[t.uid]=t,i.value=((e,a,t)=>l(e.subTree).filter((e=>{var t;return n(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component})).map((e=>e.component.uid)).map((e=>t[e])).filter((e=>!!e)))(e,a,s)},removeChild:e=>{delete s[e],i.value=i.value.filter((a=>a.uid!==e))}}},ue=s({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ce={change:(e,a)=>[e,a].every(i)},de=(e,a,l)=>{const{children:n,addChild:s,removeChild:i}=re(f(),"ElCarouselItem"),g=o(-1),y=o(null),b=o(!1),I=o(),C=r((()=>"never"!==e.arrow&&!u(x))),k=r((()=>n.value.some((e=>e.props.label.toString().length>0)))),w=r((()=>"card"===e.type)),x=r((()=>"vertical"===e.direction)),_=ie((e=>{T(e)}),300,{trailing:!0}),L=ie((a=>{!function(a){"hover"===e.trigger&&a!==g.value&&(g.value=a)}(a)}),300);function M(){y.value&&(clearInterval(y.value),y.value=null)}function S(){e.interval<=0||!e.autoplay||y.value||(y.value=setInterval((()=>E()),e.interval))}const E=()=>{g.value<n.value.length-1?g.value=g.value+1:e.loop&&(g.value=0)};function T(a){if(h(a)){const e=n.value.filter((e=>e.props.name===a));e.length>0&&(a=n.value.indexOf(e[0]))}if(a=Number(a),Number.isNaN(a)||a!==Math.floor(a))return;const t=n.value.length,l=g.value;g.value=a<0?e.loop?t-1:0:a>=t?e.loop?0:t-1:a,l===g.value&&$(l),N()}function $(e){n.value.forEach(((a,t)=>{a.translateItem(t,g.value,e)}))}function N(){M(),S()}c((()=>g.value),((e,t)=>{$(t),t>-1&&a("change",e,t)})),c((()=>e.autoplay),(e=>{e?S():M()})),c((()=>e.loop),(()=>{T(g.value)})),c((()=>e.interval),(()=>{N()})),c((()=>n.value),(()=>{n.value.length>0&&T(e.initialIndex)}));const R=t();return d((()=>{R.value=v(I.value,(()=>{$()})),S()})),m((()=>{M(),I.value&&R.value&&R.value.stop()})),p(oe,{root:I,isCardType:w,isVertical:x,items:n,loop:e.loop,addItem:s,removeItem:i,setActiveItem:T}),{root:I,activeIndex:g,arrowDisplay:C,hasLabel:k,hover:b,isCardType:w,items:n,handleButtonEnter:function(e){u(x)||n.value.forEach(((a,t)=>{e===function(e,a){var t,l,s,i;const o=u(n),r=o.length;if(0===r||!e.states.inStage)return!1;const c=a+1,d=a-1,v=r-1,m=o[v].states.active,p=o[0].states.active,h=null==(l=null==(t=o[c])?void 0:t.states)?void 0:l.active,f=null==(i=null==(s=o[d])?void 0:s.states)?void 0:i.active;return a===v&&p||h?"left":!!(0===a&&m||f)&&"right"}(a,t)&&(a.states.hover=!0)}))},handleButtonLeave:function(){u(x)||n.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){g.value=e},handleMouseEnter:function(){b.value=!0,e.pauseOnHover&&M()},handleMouseLeave:function(){b.value=!1,S()},setActiveItem:T,prev:function(){T(g.value-1)},next:function(){T(g.value+1)},throttledArrowClick:_,throttledIndicatorHover:L}},ve=["onMouseenter","onClick"],me={key:0},pe=g({name:"ElCarousel"});var he=H(g({...pe,props:ue,emits:ce,setup(e,{expose:a,emit:t}){const l=e,{root:n,activeIndex:s,arrowDisplay:i,hasLabel:o,hover:c,isCardType:d,items:v,handleButtonEnter:m,handleButtonLeave:p,handleIndicatorClick:h,handleMouseEnter:f,handleMouseLeave:g,setActiveItem:H,prev:V,next:q,throttledArrowClick:z,throttledIndicatorHover:G}=de(l,t),O=y("carousel"),U=r((()=>{const e=[O.b(),O.m(l.direction)];return u(d)&&e.push(O.m("card")),e})),W=r((()=>{const e=[O.e("indicators"),O.em("indicators",l.direction)];return u(o)&&e.push(O.em("indicators","labels")),("outside"===l.indicatorPosition||u(d))&&e.push(O.em("indicators","outside")),e}));return a({setActiveItem:H,prev:V,next:q}),(e,a)=>(b(),I("div",{ref_key:"root",ref:n,class:_(u(U)),onMouseenter:a[6]||(a[6]=L(((...e)=>u(f)&&u(f)(...e)),["stop"])),onMouseleave:a[7]||(a[7]=L(((...e)=>u(g)&&u(g)(...e)),["stop"]))},[C("div",{class:_(u(O).e("container")),style:B({height:e.height})},[u(i)?(b(),k($,{key:0,name:"carousel-arrow-left",persisted:""},{default:w((()=>[x(C("button",{type:"button",class:_([u(O).e("arrow"),u(O).em("arrow","left")]),onMouseenter:a[0]||(a[0]=e=>u(m)("left")),onMouseleave:a[1]||(a[1]=(...e)=>u(p)&&u(p)(...e)),onClick:a[2]||(a[2]=L((e=>u(z)(u(s)-1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(E))])),_:1})],34),[[T,("always"===e.arrow||u(c))&&(l.loop||u(s)>0)]])])),_:1})):N("v-if",!0),u(i)?(b(),k($,{key:1,name:"carousel-arrow-right",persisted:""},{default:w((()=>[x(C("button",{type:"button",class:_([u(O).e("arrow"),u(O).em("arrow","right")]),onMouseenter:a[3]||(a[3]=e=>u(m)("right")),onMouseleave:a[4]||(a[4]=(...e)=>u(p)&&u(p)(...e)),onClick:a[5]||(a[5]=L((e=>u(z)(u(s)+1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(R))])),_:1})],34),[[T,("always"===e.arrow||u(c))&&(l.loop||u(s)<u(v).length-1)]])])),_:1})):N("v-if",!0),A(e.$slots,"default")],6),"none"!==e.indicatorPosition?(b(),I("ul",{key:0,class:_(u(W))},[(b(!0),I(D,null,j(u(v),((a,t)=>(b(),I("li",{key:t,class:_([u(O).e("indicator"),u(O).em("indicator",e.direction),u(O).is("active",t===u(s))]),onMouseenter:e=>u(G)(t),onClick:L((e=>u(h)(t)),["stop"])},[C("button",{class:_(u(O).e("button"))},[u(o)?(b(),I("span",me,P(a.props.label),1)):N("v-if",!0)],2)],42,ve)))),128))],2)):N("v-if",!0)],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const fe=s({name:{type:String,default:""},label:{type:[String,Number],default:""}}),ge=(e,a)=>{const t=V(oe),l=f(),n=.83,s=o(!1),i=o(0),r=o(1),c=o(!1),v=o(!1),m=o(!1),p=o(!1),{isCardType:h,isVertical:g}=t;const y=(e,a,l)=>{var s;const o=u(h),d=null!=(s=t.items.value.length)?s:Number.NaN,f=e===a;o||G(l)||(p.value=f||e===l),!f&&d>2&&t.loop&&(e=function(e,a,t){const l=t-1,n=t/2;return 0===a&&e===l?-1:a===l&&0===e?t:e<a-1&&a-e>=n?t+1:e>a+1&&e-a>=n?-2:e}(e,a,d));const y=u(g);c.value=f,o?(m.value=Math.round(Math.abs(e-a))<=1,i.value=function(e,a){var l;const n=(null==(l=t.root.value)?void 0:l.offsetWidth)||0;return m.value?n*(1.17*(e-a)+1)/4:e<a?-1.83*n/4:3.83*n/4}(e,a),r.value=u(c)?1:n):i.value=function(e,a,l){const n=t.root.value;return n?((l?n.offsetHeight:n.offsetWidth)||0)*(e-a):0}(e,a,y),v.value=!0};return d((()=>{t.addItem({props:e,states:q({hover:s,translate:i,scale:r,active:c,ready:v,inStage:m,animating:p}),uid:l.uid,translateItem:y})})),z((()=>{t.removeItem(l.uid)})),{active:c,animating:p,hover:s,inStage:m,isVertical:g,translate:i,isCardType:h,scale:r,ready:v,handleItemClick:function(){if(t&&u(h)){const e=t.items.value.findIndex((({uid:e})=>e===l.uid));t.setActiveItem(e)}}}},ye=g({name:"ElCarouselItem"});var be=H(g({...ye,props:fe,setup(e){const a=e,t=y("carousel"),{active:l,animating:n,hover:s,inStage:i,isVertical:o,translate:c,isCardType:d,scale:v,ready:m,handleItemClick:p}=ge(a),h=r((()=>({transform:[`${"translate"+(u(o)?"Y":"X")}(${u(c)}px)`,`scale(${u(v)})`].join(" ")})));return(e,a)=>x((b(),I("div",{class:_([u(t).e("item"),u(t).is("active",u(l)),u(t).is("in-stage",u(i)),u(t).is("hover",u(s)),u(t).is("animating",u(n)),{[u(t).em("item","card")]:u(d)}]),style:B(u(h)),onClick:a[0]||(a[0]=(...e)=>u(p)&&u(p)(...e))},[u(d)?x((b(),I("div",{key:0,class:_(u(t).e("mask"))},null,2)),[[T,!u(l)]]):N("v-if",!0),A(e.$slots,"default")],6)),[[T,u(m)]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const Ie=O(he,{CarouselItem:be}),Ce=U(be),ke=e=>W({url:"/banner",method:"GET",params:{type:e}}),we=""+new URL("dailyRecommend.26e6fdeb.jpg",import.meta.url).href,xe=e=>(K("data-v-03c167dc"),e=e(),X(),e),_e={class:"img"},Le=xe((()=>C("img",{src:we},null,-1))),Me={class:"calendar"},Se={class:"body"},Ee=xe((()=>C("div",{class:"header left"},null,-1))),Te=xe((()=>C("div",{class:"header right"},null,-1))),$e=xe((()=>C("div",{class:"gap"},null,-1))),Ne={class:"date"},Re=xe((()=>C("div",{class:"playIcon"},[C("svg",{class:"icon","aria-hidden":"true"},[C("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Ae=xe((()=>C("div",{class:"tip"},"根据你的音乐口味生成每日更新",-1))),Be=xe((()=>C("div",{class:"title"},"每日歌曲推荐",-1))),De=["onClick"],je={class:"img"},Pe=["src"],He={class:"playCount"},Ve=xe((()=>C("div",{class:"iconItem"},[C("svg",{class:"icon","aria-hidden":"true"},[C("use",{"xlink:href":"#icon-bofang"})])],-1))),qe={class:"count"},ze=xe((()=>C("div",{class:"playIcon"},[C("svg",{class:"icon","aria-hidden":"true"},[C("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Ge={class:"title"},Oe=J(g({__name:"RecommendItem",props:{itmeLineCount:{type:Number,required:!0,default:5},playList:{type:Array,required:!0},showDailyRecommend:{type:Boolean,default:!1}},setup(e){const a=e,t=Y();let l=[1287293193,1463586082],n=o();c((()=>a.playList),(async()=>{let e=a.playList;for(let a=0;a<(null==e?void 0:e.length);a++){let t=e[a];-1!=l.indexOf(t.userId)&&await se.getPlaylistDetail({id:t.id}).then((t=>{e.splice(a,1,t.playlist)}))}n.value=e}),{immediate:!0});const s=e=>(e+1+(a.showDailyRecommend?1:0))%a.itmeLineCount==0;return(l,i)=>(b(),I("div",{id:"recommendItem",style:B({"--itmeLineCount":a.itmeLineCount})},[e.showDailyRecommend?(b(),I("div",{key:0,class:"item dailyRecommend",onClick:i[0]||(i[0]=e=>u(t).push("/dailysongs"))},[C("div",_e,[Le,C("div",Me,[C("div",Se,[Ee,Te,$e,C("div",Ne,P((new Date).getDate()),1)])]),Re,Ae]),Be])):N("",!0),(b(!0),I(D,null,j(u(n),((e,a)=>(b(),I("div",{class:_(["item",{clearMarginRight:s(a)}]),onClick:a=>u(t).push(`/songlist/${null==e?void 0:e.id}`)},[C("div",je,[C("img",{src:`${(null==e?void 0:e.picUrl)||(null==e?void 0:e.coverImgUrl)}?param=300y300`},null,8,Pe),C("div",He,[Ve,C("div",qe,P(u(F)((null==e?void 0:e.playcount)||(null==e?void 0:e.playCount)||0)),1)]),ze]),C("div",Ge,P(null==e?void 0:e.name),1)],10,De)))),256))],4))}}),[["__scopeId","data-v-03c167dc"]]),Ue=()=>W({url:"/dj/personalize/recommend",method:"GET"}),We={id:"personalRecommend"},Fe={class:"banner"},Ke=["src","onClick"],Xe={class:"recommendPlayList recommendChildren"},Ye={class:"playList"},Je=J(g({__name:"PersonalRecommend",setup(e){const a=Q(),t=Y(),l=ee();Z();let n=o([]);ne.getRecommendResource().then((e=>{var a;n.value=null==(a=e.recommend)?void 0:a.slice(0,9)})),Ue().then((e=>{}));let s=o([]);ke().then((e=>{s.value=e.banners}));return V("changeFindMusicIsSelectedIndex")(l.meta.selectedIndex),(e,l)=>{const i=Ce,o=Ie;return b(),I("div",We,[C("div",Fe,[M(o,{interval:3500,type:"card",height:"204px"},{default:w((()=>[(b(!0),I(D,null,j(u(s),((e,l)=>(b(),k(i,{key:l},{default:w((()=>[C("img",{class:"bannerImg",src:`${e.imageUrl}?param=1100y408`,height:"204",onClick:l=>(e=>{switch(e.targetType){case 1:ae.getSongDetail({ids:e.targetId}).then((e=>{let t=e.songs[0];a.appendSongToPlayLsit([{id:t.id,songName:t.name,singer:t.ar[0].name,sourceType:te.banner,source:"banner",time:le(t.dt/1e3)}],!0)}));break;case 10:t.push(`/album/${e.targetId}`);break;case 1e3:t.push(`/songlist/${e.targetId}`);break;case 3e3:window.open(`${e.url}`)}})(e)},null,8,Ke),C("span",{class:"bannerTitle",style:B(`background-color:${e.titleColor}`)},P(e.typeTitle),5)])),_:2},1024)))),128))])),_:1})]),C("div",Xe,[C("div",{class:"title",onClick:l[0]||(l[0]=e=>u(t).push("/findmusic/playlist"))},"推荐歌单"),C("div",Ye,[M(Oe,{"itme-line-count":5,"play-list":u(n),"show-daily-recommend":!0},null,8,["play-list"])])])])}}}),[["__scopeId","data-v-a02b77ab"]]);export{Je as default};
