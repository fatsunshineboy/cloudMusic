import{N as a,d as s,r as e,k as l,c as t,a as i,u as n,t as m,b as o,F as u,m as c,n as r,s as d,q as p,v,g,l as y,C as b,D as h,E as f,o as N,x as k,y as C,e as I,_}from"./index.f7ca6637.js";import{P as D,S}from"./SongPlayList.c2e05690.js";import{C as T,c as $}from"./Comment.2f0b450e.js";import"./el-select.eaa82643.js";const j=s=>a({url:"/album",method:"GET",params:s}),x=a=>(k("data-v-87324c4c"),a=a(),C(),a),L={id:"songList"},P={class:"header"},w={class:"albumImg"},E=["src"],F={class:"detail"},q={class:"title"},A=x((()=>i("div",{class:"alias"},"专辑",-1))),G={class:"name"},M=x((()=>i("div",{class:"edit iconItem"},null,-1))),R={class:"tool"},U={class:"info"},Y={class:"artist"},z=x((()=>i("span",null,"歌手： ",-1))),B={class:"nameItem"},H={class:"time"},J=x((()=>i("span",null,"时间： ",-1))),K={class:"timeItem"},O={class:"navigate"},Q={key:1,class:"ablbumDetail"},V=x((()=>i("div",{class:"intro"},"专辑介绍",-1))),W=_(s({__name:"Album",setup(a){let s=e(-1);const k=I(),C=e();l((()=>k.params.id),(()=>{var a;x.value=void 0,_.value=1,X.value=[],Z(),null==(a=C.value)||a.getComment()}));let _=e(1),x=e(),W=e(),X=e([]);const Z=()=>{j({id:k.params.id}).then((a=>{x.value=a.album,W.value=x.value.description.split("\n"),ea(x.value.info.commentCount),X.value=a.songs.map((a=>({id:a.id,songName:a.name,singer:a.ar.map((a=>a.name)),singerId:a.ar.map((a=>a.id)),source:k.params.id,sourceType:b.album,sourceName:a.al.name,albumName:a.al.name,albumId:a.al.id,time:h(a.dt/1e3),pop:a.pop})))})).catch((a=>{f.replace("/")}))};Z();const aa=a=>{let s=new Date(a);return`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`};let sa=e([{name:"音乐标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时长",props:"time",length:15},{name:"热度",props:"pop",length:40}]);const ea=a=>{s.value=a};return(a,e)=>{var l,b,h,k,I;return N(),t("div",L,[i("div",P,[i("div",w,[i("img",{src:`${null==(l=n(x))?void 0:l.picUrl}?param=300y300`},null,8,E)]),i("div",F,[i("div",q,[A,i("div",G,m(null==(b=n(x))?void 0:b.name),1),M]),i("div",R,[o(D,{"play-list":(I=n(X),I.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,sourceName:a.albumName,time:a.time}))))},null,8,["play-list"])]),i("div",U,[i("div",Y,[z,(N(!0),t(u,null,c(null==(h=n(x))?void 0:h.artists,((a,s)=>{var l,o;return N(),t("span",{class:"name",onClick:e[0]||(e[0]=a=>{var s,e;return n(f).push(`/singer/${null==(e=null==(s=n(x))?void 0:s.artist)?void 0:e.id}`)})},[i("span",B,m(null==a?void 0:a.name),1),p(i("span",null," / ",512),[[v,s!=(null==(o=null==(l=n(x))?void 0:l.artists)?void 0:o.length)-1]])])})),256))]),i("div",H,[J,i("span",K,m(aa(null==(k=n(x))?void 0:k.publishTime)),1)])])])]),i("div",O,[i("div",{class:r(["songPlayList",{isSelected:1===n(_)}]),onClick:e[1]||(e[1]=a=>d(_)?_.value=1:_=1)},"歌曲列表 ",2),i("div",{class:r(["comment",{isSelected:2===n(_)}]),onClick:e[2]||(e[2]=a=>d(_)?_.value=2:_=2)},"评论("+m(n(s)>0?n(s):0)+")",3),i("div",{class:r(["albumDetail",{isSelected:3===n(_)}]),onClick:e[3]||(e[3]=a=>d(_)?_.value=3:_=3)},"专辑详情 ",2)]),p(o(S,{"play-list-detail":n(X),"title-setting":n(sa),"show-tool-title":!1},null,8,["play-list-detail","title-setting"]),[[v,1===n(_)]]),2===n(_)?(N(),g(T,{key:0,type:n($).album,"change-comment-count":ea,ref_key:"commentRef",ref:C},null,8,["type"])):y("",!0),3===n(_)?(N(),t("div",Q,[V,(N(!0),t(u,null,c(n(W),((a,s)=>(N(),t("p",{class:"text",key:s},m(a),1)))),128))])):y("",!0)])}}}),[["__scopeId","data-v-87324c4c"]]);export{W as default};
