import{b0 as e,aA as a,au as t,b1 as l,b2 as n,T as s,a6 as i,r as o,X as r,u,w as c,ac as d,a8 as v,Y as p,aa as m,aC as h,aq as f,d as y,V as g,o as b,c as C,a as I,y as k,a0 as w,s as x,n as _,al as L,b as M,am as S,aX as T,v as E,a2 as N,k as A,aY as R,ae as $,a1 as B,F as D,h as P,t as j,a3 as H,U,ab as V,b3 as O,b4 as q,ah as z,aR as W,j as X,C as Y,p as G,l as F,e as K,_ as J,g as Q,z as Z,A as ee}from"./index.21d666b8.js";import{p as ae}from"./playListApi.5867abe2.js";function te(t,l,n){var s=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),a(t,l,{leading:s,maxWait:l,trailing:i})}const le=Symbol("carouselContextKey"),ne=(e,a)=>{const s={},i=t([]);return{children:i,addChild:t=>{s[t.uid]=t,i.value=((e,a,t)=>l(e.subTree).filter((e=>{var t;return n(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component})).map((e=>e.component.uid)).map((e=>t[e])).filter((e=>!!e)))(e,a,s)},removeChild:e=>{delete s[e],i.value=i.value.filter((a=>a.uid!==e))}}},se=s({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ie={change:(e,a)=>[e,a].every(i)},oe=(e,a,l)=>{const{children:n,addChild:s,removeChild:i}=ne(f(),"ElCarouselItem"),y=o(-1),g=o(null),b=o(!1),C=o(),I=r((()=>"never"!==e.arrow&&!u(x))),k=r((()=>n.value.some((e=>e.props.label.toString().length>0)))),w=r((()=>"card"===e.type)),x=r((()=>"vertical"===e.direction)),_=te((e=>{E(e)}),300,{trailing:!0}),L=te((a=>{!function(a){"hover"===e.trigger&&a!==y.value&&(y.value=a)}(a)}),300);function M(){g.value&&(clearInterval(g.value),g.value=null)}function S(){e.interval<=0||!e.autoplay||g.value||(g.value=setInterval((()=>T()),e.interval))}const T=()=>{y.value<n.value.length-1?y.value=y.value+1:e.loop&&(y.value=0)};function E(a){if(h(a)){const e=n.value.filter((e=>e.props.name===a));e.length>0&&(a=n.value.indexOf(e[0]))}if(a=Number(a),Number.isNaN(a)||a!==Math.floor(a))return;const t=n.value.length,l=y.value;y.value=a<0?e.loop?t-1:0:a>=t?e.loop?0:t-1:a,l===y.value&&N(l),A()}function N(e){n.value.forEach(((a,t)=>{a.translateItem(t,y.value,e)}))}function A(){M(),S()}c((()=>y.value),((e,t)=>{N(t),t>-1&&a("change",e,t)})),c((()=>e.autoplay),(e=>{e?S():M()})),c((()=>e.loop),(()=>{E(y.value)})),c((()=>e.interval),(()=>{A()})),c((()=>n.value),(()=>{n.value.length>0&&E(e.initialIndex)}));const R=t();return d((()=>{R.value=v(C.value,(()=>{N()})),S()})),p((()=>{M(),C.value&&R.value&&R.value.stop()})),m(le,{root:C,isCardType:w,isVertical:x,items:n,loop:e.loop,addItem:s,removeItem:i,setActiveItem:E}),{root:C,activeIndex:y,arrowDisplay:I,hasLabel:k,hover:b,isCardType:w,items:n,handleButtonEnter:function(e){u(x)||n.value.forEach(((a,t)=>{e===function(e,a){var t,l,s,i;const o=u(n),r=o.length;if(0===r||!e.states.inStage)return!1;const c=a+1,d=a-1,v=r-1,p=o[v].states.active,m=o[0].states.active,h=null==(l=null==(t=o[c])?void 0:t.states)?void 0:l.active,f=null==(i=null==(s=o[d])?void 0:s.states)?void 0:i.active;return a===v&&m||h?"left":!!(0===a&&p||f)&&"right"}(a,t)&&(a.states.hover=!0)}))},handleButtonLeave:function(){u(x)||n.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){y.value=e},handleMouseEnter:function(){b.value=!0,e.pauseOnHover&&M()},handleMouseLeave:function(){b.value=!1,S()},setActiveItem:E,prev:function(){E(y.value-1)},next:function(){E(y.value+1)},throttledArrowClick:_,throttledIndicatorHover:L}},re=["onMouseenter","onClick"],ue={key:0},ce=y({name:"ElCarousel"});var de=H(y({...ce,props:se,emits:ie,setup(e,{expose:a,emit:t}){const l=e,{root:n,activeIndex:s,arrowDisplay:i,hasLabel:o,hover:c,isCardType:d,items:v,handleButtonEnter:p,handleButtonLeave:m,handleIndicatorClick:h,handleMouseEnter:f,handleMouseLeave:y,setActiveItem:H,prev:U,next:V,throttledArrowClick:O,throttledIndicatorHover:q}=oe(l,t),z=g("carousel"),W=r((()=>{const e=[z.b(),z.m(l.direction)];return u(d)&&e.push(z.m("card")),e})),X=r((()=>{const e=[z.e("indicators"),z.em("indicators",l.direction)];return u(o)&&e.push(z.em("indicators","labels")),("outside"===l.indicatorPosition||u(d))&&e.push(z.em("indicators","outside")),e}));return a({setActiveItem:H,prev:U,next:V}),(e,a)=>(b(),C("div",{ref_key:"root",ref:n,class:_(u(W)),onMouseenter:a[6]||(a[6]=L(((...e)=>u(f)&&u(f)(...e)),["stop"])),onMouseleave:a[7]||(a[7]=L(((...e)=>u(y)&&u(y)(...e)),["stop"]))},[I("div",{class:_(u(z).e("container")),style:B({height:e.height})},[u(i)?(b(),k(N,{key:0,name:"carousel-arrow-left",persisted:""},{default:w((()=>[x(I("button",{type:"button",class:_([u(z).e("arrow"),u(z).em("arrow","left")]),onMouseenter:a[0]||(a[0]=e=>u(p)("left")),onMouseleave:a[1]||(a[1]=(...e)=>u(m)&&u(m)(...e)),onClick:a[2]||(a[2]=L((e=>u(O)(u(s)-1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(T))])),_:1})],34),[[E,("always"===e.arrow||u(c))&&(l.loop||u(s)>0)]])])),_:1})):A("v-if",!0),u(i)?(b(),k(N,{key:1,name:"carousel-arrow-right",persisted:""},{default:w((()=>[x(I("button",{type:"button",class:_([u(z).e("arrow"),u(z).em("arrow","right")]),onMouseenter:a[3]||(a[3]=e=>u(p)("right")),onMouseleave:a[4]||(a[4]=(...e)=>u(m)&&u(m)(...e)),onClick:a[5]||(a[5]=L((e=>u(O)(u(s)+1)),["stop"]))},[M(u(S),null,{default:w((()=>[M(u(R))])),_:1})],34),[[E,("always"===e.arrow||u(c))&&(l.loop||u(s)<u(v).length-1)]])])),_:1})):A("v-if",!0),$(e.$slots,"default")],6),"none"!==e.indicatorPosition?(b(),C("ul",{key:0,class:_(u(X))},[(b(!0),C(D,null,P(u(v),((a,t)=>(b(),C("li",{key:t,class:_([u(z).e("indicator"),u(z).em("indicator",e.direction),u(z).is("active",t===u(s))]),onMouseenter:e=>u(q)(t),onClick:L((e=>u(h)(t)),["stop"])},[I("button",{class:_(u(z).e("button"))},[u(o)?(b(),C("span",ue,j(a.props.label),1)):A("v-if",!0)],2)],42,re)))),128))],2)):A("v-if",!0)],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const ve=s({name:{type:String,default:""},label:{type:[String,Number],default:""}}),pe=(e,a)=>{const t=U(le),l=f(),n=.83,s=o(!1),i=o(0),r=o(1),c=o(!1),v=o(!1),p=o(!1),m=o(!1),{isCardType:h,isVertical:y}=t;const g=(e,a,l)=>{var s;const o=u(h),d=null!=(s=t.items.value.length)?s:Number.NaN,f=e===a;o||q(l)||(m.value=f||e===l),!f&&d>2&&t.loop&&(e=function(e,a,t){const l=t-1,n=t/2;return 0===a&&e===l?-1:a===l&&0===e?t:e<a-1&&a-e>=n?t+1:e>a+1&&e-a>=n?-2:e}(e,a,d));const g=u(y);c.value=f,o?(p.value=Math.round(Math.abs(e-a))<=1,i.value=function(e,a){var l;const n=(null==(l=t.root.value)?void 0:l.offsetWidth)||0;return p.value?n*(1.17*(e-a)+1)/4:e<a?-1.83*n/4:3.83*n/4}(e,a),r.value=u(c)?1:n):i.value=function(e,a,l){const n=t.root.value;return n?((l?n.offsetHeight:n.offsetWidth)||0)*(e-a):0}(e,a,g),v.value=!0};return d((()=>{t.addItem({props:e,states:V({hover:s,translate:i,scale:r,active:c,ready:v,inStage:p,animating:m}),uid:l.uid,translateItem:g})})),O((()=>{t.removeItem(l.uid)})),{active:c,animating:m,hover:s,inStage:p,isVertical:y,translate:i,isCardType:h,scale:r,ready:v,handleItemClick:function(){if(t&&u(h)){const e=t.items.value.findIndex((({uid:e})=>e===l.uid));t.setActiveItem(e)}}}},me=y({name:"ElCarouselItem"});var he=H(y({...me,props:ve,setup(e){const a=e,t=g("carousel"),{active:l,animating:n,hover:s,inStage:i,isVertical:o,translate:c,isCardType:d,scale:v,ready:p,handleItemClick:m}=pe(a),h=r((()=>({transform:[`${"translate"+(u(o)?"Y":"X")}(${u(c)}px)`,`scale(${u(v)})`].join(" ")})));return(e,a)=>x((b(),C("div",{class:_([u(t).e("item"),u(t).is("active",u(l)),u(t).is("in-stage",u(i)),u(t).is("hover",u(s)),u(t).is("animating",u(n)),{[u(t).em("item","card")]:u(d)}]),style:B(u(h)),onClick:a[0]||(a[0]=(...e)=>u(m)&&u(m)(...e))},[u(d)?x((b(),C("div",{key:0,class:_(u(t).e("mask"))},null,2)),[[E,!u(l)]]):A("v-if",!0),$(e.$slots,"default")],6)),[[E,u(p)]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const fe=z(de,{CarouselItem:he}),ye=W(he),ge=e=>X({url:"/banner",method:"GET",params:{type:e}}),be=()=>X({url:"/recommend/resource",method:"GET"}),Ce=""+new URL("dailyRecommend.26e6fdeb.jpg",import.meta.url).href,Ie=e=>(G("data-v-03c167dc"),e=e(),F(),e),ke={class:"img"},we=Ie((()=>I("img",{src:Ce},null,-1))),xe={class:"calendar"},_e={class:"body"},Le=Ie((()=>I("div",{class:"header left"},null,-1))),Me=Ie((()=>I("div",{class:"header right"},null,-1))),Se=Ie((()=>I("div",{class:"gap"},null,-1))),Te={class:"date"},Ee=Ie((()=>I("div",{class:"playIcon"},[I("svg",{class:"icon","aria-hidden":"true"},[I("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Ne=Ie((()=>I("div",{class:"tip"},"根据你的音乐口味生成每日更新",-1))),Ae=Ie((()=>I("div",{class:"title"},"每日歌曲推荐",-1))),Re=["onClick"],$e={class:"img"},Be=["src"],De={class:"playCount"},Pe=Ie((()=>I("div",{class:"iconItem"},[I("svg",{class:"icon","aria-hidden":"true"},[I("use",{"xlink:href":"#icon-bofang"})])],-1))),je={class:"count"},He=Ie((()=>I("div",{class:"playIcon"},[I("svg",{class:"icon","aria-hidden":"true"},[I("use",{"xlink:href":"#icon-shipinbofangshibofang"})])],-1))),Ue={class:"title"},Ve=J(y({__name:"RecommendItem",props:{itmeLineCount:{type:Number,required:!0,default:5},playList:{type:Array,required:!0},showDailyRecommend:{type:Boolean,default:!1}},setup(e){const a=e,t=K();let l=[1287293193,1463586082],n=o();c((()=>a.playList),(async()=>{let e=a.playList;for(let a=0;a<(null==e?void 0:e.length);a++){let t=e[a];-1!=l.indexOf(t.userId)&&await ae.getPlaylistDetail({id:t.id}).then((t=>{e.splice(a,1,t.playlist)}))}n.value=e}),{immediate:!0});const s=e=>(e+1+(a.showDailyRecommend?1:0))%a.itmeLineCount==0;return(l,i)=>(b(),C("div",{id:"recommendItem",style:B({"--itmeLineCount":a.itmeLineCount})},[e.showDailyRecommend?(b(),C("div",{key:0,class:"item dailyRecommend",onClick:i[0]||(i[0]=e=>u(t).push("/dailysongs"))},[I("div",ke,[we,I("div",xe,[I("div",_e,[Le,Me,Se,I("div",Te,j((new Date).getDate()),1)])]),Ee,Ne]),Ae])):A("",!0),(b(!0),C(D,null,P(u(n),((e,a)=>(b(),C("div",{class:_(["item",{clearMarginRight:s(a)}]),onClick:a=>u(t).push(`/songlist/${null==e?void 0:e.id}`)},[I("div",$e,[I("img",{src:`${(null==e?void 0:e.picUrl)||(null==e?void 0:e.coverImgUrl)}?param=300y300`},null,8,Be),I("div",De,[Pe,I("div",je,j(u(Y)((null==e?void 0:e.playcount)||(null==e?void 0:e.playCount)||0)),1)]),He]),I("div",Ue,j(null==e?void 0:e.name),1)],10,Re)))),256))],4))}}),[["__scopeId","data-v-03c167dc"]]),Oe={id:"personalRecommend"},qe={class:"banner"},ze=["src","onClick"],We={class:"recommendPlayList"},Xe=(e=>(G("data-v-e4c18f89"),e=e(),F(),e))((()=>I("div",{class:"title"},"推荐歌单",-1))),Ye={class:"playList"},Ge=J(y({__name:"PersonalRecommend",setup(e){const a=Q(),t=K();let l=o([]);be().then((e=>{var a;l.value=null==(a=e.recommend)?void 0:a.slice(0,9)}));let n=o([]);ge().then((e=>{n.value=e.banners}));return(e,s)=>{const i=ye,o=fe;return b(),C("div",Oe,[I("div",qe,[M(o,{interval:3500,type:"card",height:"200px"},{default:w((()=>[(b(!0),C(D,null,P(u(n),((e,l)=>(b(),k(i,{key:l},{default:w((()=>[I("img",{class:"bannerImg",src:e.imageUrl,height:"200",style:{"border-radius":"8px"},onClick:l=>(e=>{switch(e.targetType){case 1:Z.getSongDetail({ids:e.targetId}).then((e=>{let t=e.songs[0];a.appendSongToPlayLsit([{id:t.id,songName:t.name,singer:t.ar[0].name,sourceType:3,source:"banner",time:ee(t.dt/1e3)}],!0)}));break;case 10:t.push(`/album/${e.targetId}`);break;case 3e3:window.open(`${e.url}`)}})(e)},null,8,ze),I("span",{class:"bannerTitle",style:B(`background-color:${e.titleColor}`)},j(e.typeTitle),5)])),_:2},1024)))),128))])),_:1})]),I("div",We,[Xe,I("div",Ye,[M(Ve,{"itme-line-count":5,"play-list":u(l),"show-daily-recommend":!0},null,8,["play-list"])])])])}}}),[["__scopeId","data-v-e4c18f89"]]);export{Ge as default};
