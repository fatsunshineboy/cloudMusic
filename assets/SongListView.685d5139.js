import{d as l,e as a,j as s,r as e,k as i,o as n,c as t,u as r,l as o,F as u,m as d,a as c,t as v,q as p,v as m,b as g,s as y,x as h,y as k,_ as b,z as f,A as C,n as I,g as T,B as S,C as _,D as L,E as N,G as $}from"./index.f13d04ae.js";import{P as x,S as j}from"./SongPlayList.8d13806d.js";import{C as w,c as D}from"./Comment.ba1ace2b.js";import{E as P}from"./el-select.717c9ca8.js";import{p as U}from"./playListApi.1c1cfe1c.js";const z=l=>(h("data-v-77181226"),l=l(),k(),l),A={id:"subscribers"},B={key:0,class:"nosubscribers"},E=["onClick"],F=["src"],M={class:"userAndIntro"},q={class:"user"},G={class:"name"},R={class:"gender male"},V=[z((()=>c("svg",{class:"icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-nanxing"})],-1)))],Y={class:"gender female"},H=[z((()=>c("svg",{class:"icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-nvxing"})],-1)))],J={class:"pagination"},K=b(l({__name:"Subscribers",setup(l){const h=a(),k=s();let b=e(0),f=e(1),C=e(60),I=e();const T=()=>{I.value=[],U.getPlaylistSubscribers({id:h.params.id,limit:C.value,offset:(f.value-1)*C.value}).then((l=>{b.value=l.total,I.value=l.subscribers}))};return T(),i((()=>f.value),(()=>{T()})),(l,a)=>{const s=P;return n(),t("div",A,[r(I).length?o("",!0):(n(),t("div",B,"暂无收藏者")),(n(!0),t(u,null,d(r(I),((l,a)=>(n(),t("div",{class:"subscriber",key:a,onClick:a=>r(k).push(`/user/${null==l?void 0:l.userId}`)},[c("img",{src:`${null==l?void 0:l.avatarUrl}?param=110y110`},null,8,F),c("div",M,[c("div",q,[c("div",G,v(null==l?void 0:l.nickname),1),p(c("div",R,V,512),[[m,1===(null==l?void 0:l.gender)]]),p(c("div",Y,H,512),[[m,2===(null==l?void 0:l.gender)]])]),p(c("div",{class:"intro"},v(null==l?void 0:l.signature),513),[[m,null==l?void 0:l.signature]])])],8,E)))),128)),c("div",J,[g(s,{small:"",background:"",layout:"prev, pager, next",total:r(b),"page-size":r(C),"current-page":r(f),"onUpdate:current-page":a[0]||(a[0]=l=>y(f)?f.value=l:f=l),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-77181226"]]),O=l=>(h("data-v-6e22b475"),l=l(),k(),l),Q={id:"songList"},W={class:"header"},X={class:"songListImg"},Z=["src"],ll={class:"detail"},al={class:"title"},sl=O((()=>c("div",{class:"alias"},"歌单",-1))),el={class:"name"},il=O((()=>c("div",{class:"edit iconItem"},null,-1))),nl={class:"creater"},tl={class:"createrImg"},rl=["src"],ol={class:"time"},ul={class:"tool"},dl={class:"introduce"},cl={class:"tags"},vl=O((()=>c("span",{class:"introduceTitle"},"标签 : ",-1))),pl={class:"tagContent"},ml={class:"tagContent"},gl={class:"tagItem"},yl={class:"item"},hl={class:"gap"},kl={class:"songsCount"},bl=O((()=>c("span",{class:"introduceTitle"},"歌曲 : ",-1))),fl={class:"playTime"},Cl=O((()=>c("span",{class:"introduceTitle"},"播放 : ",-1))),Il={class:"brief"},Tl=O((()=>c("span",{class:"introduceTitle"},"简介 : ",-1))),Sl={class:"briefContent"},_l={class:"navigate"},Ll=b(l({__name:"SongListView",setup(l){const s=a(),h=e();f();let k=e(!1),b=e(!1);i((()=>s.params.id),(()=>{var l;P.value=1,z.value=[],A.value=[],B(),null==(l=h.value)||l.getComment()}));let P=e(1),z=e(),A=e([]);const B=()=>{U.getPlaylistDetail({id:s.params.id}).then((l=>{var a,e,i,n,t,r,o;if(z.value=l.playlist,((null==(e=null==(a=z.value)?void 0:a.description)?void 0:e.split("\n").length)>=2||(null==(n=null==(i=z.value)?void 0:i.description)?void 0:n.length)>70)&&(k.value=!0,b.value=!1),null==(r=null==(t=z.value)?void 0:t.trackIds)?void 0:r.length){let l=null==(o=z.value)?void 0:o.trackIds.map((l=>l.id));S.getSongDetail({ids:l.join(",")}).then((l=>{A.value=l.songs.map((l=>{var a;return{id:l.id,songName:l.name,singer:l.ar.map((l=>l.name)),singerId:l.ar.map((l=>l.id)),source:s.params.id,sourceType:_.playList,sourceName:null==(a=z.value)?void 0:a.name,albumName:l.al.name,albumId:l.al.id,time:L(l.dt/1e3)}}))}))}})).catch((l=>{N.replace("/")}))};B();const E=l=>{let a=new Date(l);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`};let F=e([{name:"标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时间",props:"time",length:15}]);return(l,a)=>{var s,e,i,f,S,_,L,U,B,M,q,G,R,V,Y,H,J,O,Ll,Nl,$l,xl,jl,wl,Dl;return n(),t("div",Q,[c("div",W,[c("div",X,[c("img",{src:`${null==(s=r(z))?void 0:s.coverImgUrl}?param=300y300`,alt:"",srcset:""},null,8,Z)]),c("div",ll,[c("div",al,[sl,c("div",el,v(null==(e=r(z))?void 0:e.name),1),il]),c("div",nl,[p(c("div",tl,[c("img",{src:`${null==(f=null==(i=r(z))?void 0:i.creator)?void 0:f.avatarUrl}?param=100y100`,onClick:a[0]||(a[0]=l=>{var a,s;return r(N).push(`/user/${null==(s=null==(a=r(z))?void 0:a.creator)?void 0:s.userId}`)})},null,8,rl)],512),[[m,null==(_=null==(S=r(z))?void 0:S.creator)?void 0:_.avatarUrl]]),p(c("div",{class:"name",onClick:a[1]||(a[1]=l=>{var a,s;return r(N).push(`/user/${null==(s=null==(a=r(z))?void 0:a.creator)?void 0:s.userId}`)})},v(null==(U=null==(L=r(z))?void 0:L.creator)?void 0:U.nickname),513),[[m,null==(M=null==(B=r(z))?void 0:B.creator)?void 0:M.nickname]]),c("div",ol,v(E(null==(q=r(z))?void 0:q.createTime))+"创建",1)]),c("div",ul,[g(x,{"play-list":(Dl=r(A),Dl.map((l=>({id:l.id,songName:l.songName,singer:l.singer,source:l.source,sourceType:l.sourceType,sourceName:l.playListName,time:l.time}))))},null,8,["play-list"])]),c("div",dl,[p(c("div",cl,[vl,p(c("span",pl,"添加标签",512),[[m,!(null==(R=null==(G=r(z))?void 0:G.tags)?void 0:R.length)]]),p(c("span",ml,[(n(!0),t(u,null,d(null==(V=r(z))?void 0:V.tags,((l,a)=>{var s,e;return n(),t("span",gl,[c("span",yl,v(l),1),p(c("span",hl," / ",512),[[m,a!=(null==(e=null==(s=r(z))?void 0:s.tags)?void 0:e.length)-1]])])})),256))],512),[[m,null==(H=null==(Y=r(z))?void 0:Y.tags)?void 0:H.length]])],512),[[m,5!=(null==(J=r(z))?void 0:J.specialType)]]),c("div",kl,[bl,C(v(null==(O=r(z))?void 0:O.trackCount),1)]),c("div",fl,[Cl,C(v(r($)(null==(Ll=r(z))?void 0:Ll.playCount)),1)]),p(c("div",Il,[Tl,p(c("span",null,"添加简介",512),[[m,!(null==(Nl=r(z))?void 0:Nl.description)]]),p(c("div",{class:I(["moreBrief",{briefShort:!r(b)}])},[c("span",Sl,v(null==($l=r(z))?void 0:$l.description),1),r(k)&&!r(b)?(n(),t("span",{key:0,class:"showMore",onClick:a[2]||(a[2]=l=>y(b)?b.value=!0:b=!0)})):o("",!0),r(k)&&r(b)?(n(),t("span",{key:1,class:"showLess",onClick:a[3]||(a[3]=l=>y(b)?b.value=!1:b=!1)})):o("",!0)],2),[[m,null==(xl=r(z))?void 0:xl.description]])],512),[[m,5!=(null==(jl=r(z))?void 0:jl.specialType)]])])])]),c("div",_l,[c("div",{class:I(["songPlayList",{isSelected:1===r(P)}]),onClick:a[4]||(a[4]=l=>y(P)?P.value=1:P=1)},"歌曲列表 ",2),c("div",{class:I(["comment",{isSelected:2===r(P)}]),onClick:a[5]||(a[5]=l=>y(P)?P.value=2:P=2)},"评论("+v((null==(wl=r(z))?void 0:wl.commentCount)||0)+")",3),c("div",{class:I(["collecter",{isSelected:3===r(P)}]),onClick:a[6]||(a[6]=l=>y(P)?P.value=3:P=3)},"收藏者 ",2)]),p(g(j,{"play-list-detail":r(A),"title-setting":r(F),"show-tool-title":!0},null,8,["play-list-detail","title-setting"]),[[m,1===r(P)]]),2===r(P)?(n(),T(w,{key:0,type:r(D).playlist,ref_key:"commentRef",ref:h},null,8,["type"])):o("",!0),3===r(P)?(n(),T(K,{key:1})):o("",!0)])}}}),[["__scopeId","data-v-6e22b475"]]);export{Ll as default};
