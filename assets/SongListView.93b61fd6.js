import{d as l,r as a,k as s,l as e,c as i,a as n,u as t,t as o,m as r,v as d,b as c,F as u,q as v,s as p,n as m,x as g,y,g as h,z as k,A as f,B as C,o as b,C as I,D as T,E as L,e as N,_ as S}from"./index.06d35deb.js";import{P as j,S as $}from"./SongPlayList.2ac69666.js";import{C as _,c as w,a as D}from"./Subscribers.1bb5af99.js";import{p as P}from"./playListApi.188b90fa.js";import"./el-select.b238e199.js";const x=l=>(T("data-v-59fb0e7a"),l=l(),L(),l),U={id:"songList"},A={class:"header"},B={class:"songListImg"},F=["src"],M={class:"detail"},q={class:"title"},z=x((()=>n("div",{class:"alias"},"歌单",-1))),E={class:"name"},R=x((()=>n("div",{class:"edit iconItem"},null,-1))),V={class:"creater"},Y={class:"createrImg"},G=["src"],H={class:"time"},J={class:"tool"},K={class:"introduce"},O={class:"tags"},Q=x((()=>n("span",{class:"introduceTitle"},"标签 : ",-1))),W={class:"tagContent"},X={class:"tagContent"},Z={class:"tagItem"},ll={class:"item"},al={class:"gap"},sl={class:"songsCount"},el=x((()=>n("span",{class:"introduceTitle"},"歌曲 : ",-1))),il={class:"playTime"},nl=x((()=>n("span",{class:"introduceTitle"},"播放 : ",-1))),tl={class:"brief"},ol=x((()=>n("span",{class:"introduceTitle"},"简介 : ",-1))),rl={class:"briefContent"},dl={class:"navigate"},cl=S(l({__name:"SongListView",setup(l){const T=N(),L=a();s();let S=a(!1),x=a(!1);e((()=>T.params.id),(()=>{var l;cl.value=1,ul.value=[],vl.value=[],pl(),null==(l=L.value)||l.getComment()}));let cl=a(1),ul=a(),vl=a([]);const pl=()=>{P.getPlaylistDetail({id:T.params.id}).then((l=>{var a,s,e,i,n,t,o;if(ul.value=l.playlist,((null==(s=null==(a=ul.value)?void 0:a.description)?void 0:s.split("\n").length)>=2||(null==(i=null==(e=ul.value)?void 0:e.description)?void 0:i.length)>70)&&(S.value=!0,x.value=!1),null==(t=null==(n=ul.value)?void 0:n.trackIds)?void 0:t.length){let l=null==(o=ul.value)?void 0:o.trackIds.map((l=>l.id));k.getSongDetail({ids:l.join(",")}).then((l=>{vl.value=l.songs.map((l=>{var a;return{id:l.id,songName:l.name,singer:l.ar.map((l=>l.name)),singerId:l.ar.map((l=>l.id)),source:T.params.id,sourceType:2,playListName:null==(a=ul.value)?void 0:a.name,albumName:l.al.name,albumId:l.al.id,time:f(l.dt/1e3)}}))}))}})).catch((l=>{C.replace("/")}))};pl();const ml=l=>{let a=new Date(l);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`};let gl=a([{name:"标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时间",props:"time",length:15}]);return(l,a)=>{var s,e,k,f,T,N,P,pl,yl,hl,kl,fl,Cl,bl,Il,Tl,Ll,Nl,Sl,jl,$l,_l,wl,Dl,Pl;return b(),i("div",U,[n("div",A,[n("div",B,[n("img",{src:null==(s=t(ul))?void 0:s.coverImgUrl,alt:"",srcset:""},null,8,F)]),n("div",M,[n("div",q,[z,n("div",E,o(null==(e=t(ul))?void 0:e.name),1),R]),n("div",V,[r(n("div",Y,[n("img",{src:`${null==(f=null==(k=t(ul))?void 0:k.creator)?void 0:f.avatarUrl}?param=100y100`,onClick:a[0]||(a[0]=l=>{var a,s;return t(C).push(`/user/${null==(s=null==(a=t(ul))?void 0:a.creator)?void 0:s.userId}`)})},null,8,G)],512),[[d,null==(N=null==(T=t(ul))?void 0:T.creator)?void 0:N.avatarUrl]]),r(n("div",{class:"name",onClick:a[1]||(a[1]=l=>{var a,s;return t(C).push(`/user/${null==(s=null==(a=t(ul))?void 0:a.creator)?void 0:s.userId}`)})},o(null==(pl=null==(P=t(ul))?void 0:P.creator)?void 0:pl.nickname),513),[[d,null==(hl=null==(yl=t(ul))?void 0:yl.creator)?void 0:hl.nickname]]),n("div",H,o(ml(null==(kl=t(ul))?void 0:kl.createTime))+"创建",1)]),n("div",J,[c(j,{"play-list":(Pl=t(vl),Pl.map((l=>({id:l.id,songName:l.songName,singer:l.singer,source:l.source,sourceType:l.sourceType,playListName:l.playListName,time:l.time}))))},null,8,["play-list"])]),n("div",K,[r(n("div",O,[Q,r(n("span",W,"添加标签",512),[[d,!(null==(Cl=null==(fl=t(ul))?void 0:fl.tags)?void 0:Cl.length)]]),r(n("span",X,[(b(!0),i(u,null,v(null==(bl=t(ul))?void 0:bl.tags,((l,a)=>{var s,e;return b(),i("span",Z,[n("span",ll,o(l),1),r(n("span",al," / ",512),[[d,a!=(null==(e=null==(s=t(ul))?void 0:s.tags)?void 0:e.length)-1]])])})),256))],512),[[d,null==(Tl=null==(Il=t(ul))?void 0:Il.tags)?void 0:Tl.length]])],512),[[d,5!=(null==(Ll=t(ul))?void 0:Ll.specialType)]]),n("div",sl,[el,p(o(null==(Nl=t(ul))?void 0:Nl.trackCount),1)]),n("div",il,[nl,p(o(t(I)(null==(Sl=t(ul))?void 0:Sl.playCount)),1)]),r(n("div",tl,[ol,r(n("span",null,"添加简介",512),[[d,!(null==(jl=t(ul))?void 0:jl.description)]]),r(n("div",{class:m(["moreBrief",{briefShort:!t(x)}])},[n("span",rl,o(null==($l=t(ul))?void 0:$l.description),1),t(S)&&!t(x)?(b(),i("span",{key:0,class:"showMore",onClick:a[2]||(a[2]=l=>g(x)?x.value=!0:x=!0)})):y("",!0),t(S)&&t(x)?(b(),i("span",{key:1,class:"showLess",onClick:a[3]||(a[3]=l=>g(x)?x.value=!1:x=!1)})):y("",!0)],2),[[d,null==(_l=t(ul))?void 0:_l.description]])],512),[[d,5!=(null==(wl=t(ul))?void 0:wl.specialType)]])])])]),n("div",dl,[n("div",{class:m(["songPlayList",{isSelected:1===t(cl)}]),onClick:a[4]||(a[4]=l=>g(cl)?cl.value=1:cl=1)},"歌曲列表 ",2),n("div",{class:m(["comment",{isSelected:2===t(cl)}]),onClick:a[5]||(a[5]=l=>g(cl)?cl.value=2:cl=2)},"评论("+o((null==(Dl=t(ul))?void 0:Dl.commentCount)||0)+")",3),n("div",{class:m(["collecter",{isSelected:3===t(cl)}]),onClick:a[6]||(a[6]=l=>g(cl)?cl.value=3:cl=3)},"收藏者 ",2)]),r(c($,{"play-list-detail":t(vl),"title-setting":t(gl),"show-tool-title":!0},null,8,["play-list-detail","title-setting"]),[[d,1===t(cl)]]),2===t(cl)?(b(),h(_,{key:0,type:t(w).playlist,ref_key:"commentRef",ref:L},null,8,["type"])):y("",!0),3===t(cl)?(b(),h(D,{key:1})):y("",!0)])}}}),[["__scopeId","data-v-59fb0e7a"]]);export{cl as default};
