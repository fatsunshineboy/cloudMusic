import{d as l,e as a,j as e,r as s,k as n,o as i,c as t,u as r,l as o,F as c,m as u,a as d,t as v,q as m,v as p,b as g,s as y,x as h,y as k,_ as f,z as C,A as b,n as I,g as T,B as S,C as _,D as L,E as N,G as $}from"./index.0a94ea26.js";import{P as x,S as j}from"./SongPlayList.4ccfd1e2.js";import{C as w,c as D}from"./Comment.f660744d.js";import{E as P}from"./el-select.2175e661.js";import{p as U}from"./playListApi.2953865d.js";const z=l=>(h("data-v-336ddcc8"),l=l(),k(),l),A={id:"subscribers"},B={key:0,class:"nosubscribers"},E=["onClick"],F=["src"],M={class:"userAndIntro"},q={class:"user"},G={class:"name"},R={class:"gender male"},V=[z((()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-nanxing"})],-1)))],Y={class:"gender female"},H=[z((()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-nvxing"})],-1)))],J={class:"pagination"},K=f(l({__name:"Subscribers",setup(l){const h=a(),k=e();let f=s(0),C=s(1),b=s(60),I=s();const T=()=>{I.value=[],U.getPlaylistSubscribers({id:h.params.id,limit:b.value,offset:(C.value-1)*b.value}).then((l=>{f.value=l.total,I.value=l.subscribers}))};return T(),n((()=>C.value),(()=>{T()})),(l,a)=>{const e=P;return i(),t("div",A,[r(I).length?o("",!0):(i(),t("div",B,"暂无收藏者")),(i(!0),t(c,null,u(r(I),((l,a)=>(i(),t("div",{class:"subscriber",key:a,onClick:a=>r(k).push(`/user/${null==l?void 0:l.userId}`)},[d("img",{src:`${null==l?void 0:l.avatarUrl}?param=110y110`},null,8,F),d("div",M,[d("div",q,[d("div",G,v(null==l?void 0:l.nickname),1),m(d("div",R,V,512),[[p,1===(null==l?void 0:l.gender)]]),m(d("div",Y,H,512),[[p,2===(null==l?void 0:l.gender)]])]),m(d("div",{class:"intro"},v(null==l?void 0:l.signature),513),[[p,null==l?void 0:l.signature]])])],8,E)))),128)),d("div",J,[g(e,{small:"",background:"",layout:"prev, pager, next",total:r(f),"page-size":r(b),"current-page":r(C),"onUpdate:current-page":a[0]||(a[0]=l=>y(C)?C.value=l:C=l),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-336ddcc8"]]),O=l=>(h("data-v-57fc166a"),l=l(),k(),l),Q={id:"songList"},W={class:"header"},X={class:"songListImg"},Z=["src"],ll={class:"detail"},al={class:"title"},el=O((()=>d("div",{class:"alias"},"歌单",-1))),sl={class:"name"},nl=O((()=>d("div",{class:"edit iconItem"},null,-1))),il={class:"creater"},tl={class:"createrImg"},rl=["src"],ol={class:"time"},cl={class:"tool"},ul={class:"introduce"},dl={class:"tags"},vl=O((()=>d("span",{class:"introduceTitle"},"标签 : ",-1))),ml={class:"tagContent"},pl={class:"tagContent"},gl={class:"tagItem"},yl={class:"item"},hl={class:"gap"},kl={class:"songsCount"},fl=O((()=>d("span",{class:"introduceTitle"},"歌曲 : ",-1))),Cl={class:"playTime"},bl=O((()=>d("span",{class:"introduceTitle"},"播放 : ",-1))),Il={class:"brief"},Tl=O((()=>d("span",{class:"introduceTitle"},"简介 : ",-1))),Sl={class:"briefContent"},_l={class:"navigate"},Ll=f(l({__name:"SongListView",setup(l){const e=a(),h=s();C();let k=s(!1),f=s(!1),P=s(-1),z=l=>{P.value=l};n((()=>e.params.id),(()=>{var l;A.value=1,B.value=[],E.value=[],F(),null==(l=h.value)||l.getComment()}));let A=s(1),B=s(),E=s([]);const F=()=>{var l;U.getPlaylistDetail({id:e.params.id}).then((l=>{var a,s,n,i,t,r,o;if(B.value=l.playlist,z(B.value.commentCount),((null==(s=null==(a=B.value)?void 0:a.description)?void 0:s.split("\n").length)>=2||(null==(i=null==(n=B.value)?void 0:n.description)?void 0:i.length)>70)&&(k.value=!0,f.value=!1),null==(r=null==(t=B.value)?void 0:t.trackIds)?void 0:r.length){let l=null==(o=B.value)?void 0:o.trackIds.map((l=>l.id));S.getSongDetail({ids:l.join(",")}).then((l=>{E.value=l.songs.map((l=>{var a;return{id:l.id,songName:l.name,singer:l.ar.map((l=>l.name)),singerId:l.ar.map((l=>l.id)),source:e.params.id,sourceType:_.playList,sourceName:null==(a=B.value)?void 0:a.name,albumName:l.al.name,albumId:l.al.id,time:L(l.dt/1e3)}}))}))}})).catch((l=>{N.replace("/")})),null==(l=h.value)||l.getComment()};F();const M=l=>{let a=new Date(l);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`};let q=s([{name:"标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时间",props:"time",length:15}]);return(l,a)=>{var e,s,n,C,S,_,L,U,F,G,R,V,Y,H,J,O,Ll,Nl,$l,xl,jl,wl,Dl,Pl;return i(),t("div",Q,[d("div",W,[d("div",X,[d("img",{src:`${null==(e=r(B))?void 0:e.coverImgUrl}?param=300y300`,alt:"",srcset:""},null,8,Z)]),d("div",ll,[d("div",al,[el,d("div",sl,v(null==(s=r(B))?void 0:s.name),1),nl]),d("div",il,[m(d("div",tl,[d("img",{src:`${null==(C=null==(n=r(B))?void 0:n.creator)?void 0:C.avatarUrl}?param=100y100`,onClick:a[0]||(a[0]=l=>{var a,e;return r(N).push(`/user/${null==(e=null==(a=r(B))?void 0:a.creator)?void 0:e.userId}`)})},null,8,rl)],512),[[p,null==(_=null==(S=r(B))?void 0:S.creator)?void 0:_.avatarUrl]]),m(d("div",{class:"name",onClick:a[1]||(a[1]=l=>{var a,e;return r(N).push(`/user/${null==(e=null==(a=r(B))?void 0:a.creator)?void 0:e.userId}`)})},v(null==(U=null==(L=r(B))?void 0:L.creator)?void 0:U.nickname),513),[[p,null==(G=null==(F=r(B))?void 0:F.creator)?void 0:G.nickname]]),d("div",ol,v(M(null==(R=r(B))?void 0:R.createTime))+"创建",1)]),d("div",cl,[g(x,{"play-list":(Pl=r(E),Pl.map((l=>({id:l.id,songName:l.songName,singer:l.singer,source:l.source,sourceType:l.sourceType,sourceName:l.playListName,time:l.time}))))},null,8,["play-list"])]),d("div",ul,[m(d("div",dl,[vl,m(d("span",ml,"添加标签",512),[[p,!(null==(Y=null==(V=r(B))?void 0:V.tags)?void 0:Y.length)]]),m(d("span",pl,[(i(!0),t(c,null,u(null==(H=r(B))?void 0:H.tags,((l,a)=>{var e,s;return i(),t("span",gl,[d("span",yl,v(l),1),m(d("span",hl," / ",512),[[p,a!=(null==(s=null==(e=r(B))?void 0:e.tags)?void 0:s.length)-1]])])})),256))],512),[[p,null==(O=null==(J=r(B))?void 0:J.tags)?void 0:O.length]])],512),[[p,5!=(null==(Ll=r(B))?void 0:Ll.specialType)]]),d("div",kl,[fl,b(v(null==(Nl=r(B))?void 0:Nl.trackCount),1)]),d("div",Cl,[bl,b(v(r($)(null==($l=r(B))?void 0:$l.playCount)),1)]),m(d("div",Il,[Tl,m(d("span",null,"添加简介",512),[[p,!(null==(xl=r(B))?void 0:xl.description)]]),m(d("div",{class:I(["moreBrief",{briefShort:!r(f)}])},[d("span",Sl,v(null==(jl=r(B))?void 0:jl.description),1),r(k)&&!r(f)?(i(),t("span",{key:0,class:"showMore",onClick:a[2]||(a[2]=l=>y(f)?f.value=!0:f=!0)})):o("",!0),r(k)&&r(f)?(i(),t("span",{key:1,class:"showLess",onClick:a[3]||(a[3]=l=>y(f)?f.value=!1:f=!1)})):o("",!0)],2),[[p,null==(wl=r(B))?void 0:wl.description]])],512),[[p,5!=(null==(Dl=r(B))?void 0:Dl.specialType)]])])])]),d("div",_l,[d("div",{class:I(["songPlayList",{isSelected:1===r(A)}]),onClick:a[4]||(a[4]=l=>y(A)?A.value=1:A=1)},"歌曲列表 ",2),d("div",{class:I(["comment",{isSelected:2===r(A)}]),onClick:a[5]||(a[5]=l=>y(A)?A.value=2:A=2)},"评论("+v(r(P)>0?r(P):0)+")",3),d("div",{class:I(["collecter",{isSelected:3===r(A)}]),onClick:a[6]||(a[6]=l=>y(A)?A.value=3:A=3)},"收藏者 ",2)]),m(g(j,{"play-list-detail":r(E),"title-setting":r(q),"show-tool-title":!0},null,8,["play-list-detail","title-setting"]),[[p,1===r(A)]]),2===r(A)?(i(),T(w,{key:0,type:r(D).playlist,"change-comment-count":r(z),ref_key:"commentRef",ref:h},null,8,["type","change-comment-count"])):o("",!0),3===r(A)?(i(),T(K,{key:1})):o("",!0)])}}}),[["__scopeId","data-v-57fc166a"]]);export{Ll as default};
