import{d as e,G as a,r as s,l,b7 as t,b8 as n,c as o,a as r,b as u,u as i,x as p,e as d,b1 as m,A as g,o as c,i as v,_ as y}from"./index.06d35deb.js";import{E as h}from"./el-select.b238e199.js";import{s as b}from"./search.335aedb5.js";import{P as f,S as k}from"./SongPlayList.2ac69666.js";const w={id:"single"},A={class:"playAllAndDownloadAllVue"},N={class:"pagination"},_=y(e({__name:"single",setup(e){const y=d(),_=v("changeSearchResultNum");a();let j=s([]),q=s(),x=s(1),S=s(100),I=s(0);l((()=>x.value),(()=>{z()}));const z=()=>{q.value=[],j.value=[],m.search({keywords:y.query.keywords,type:b.searchType.single,limit:S.value,offset:(x.value-1)*S.value}).then((e=>{let a=e.result;a&&(a.songs.forEach((e=>{j.value.push({id:e.id,songName:e.name,singer:e.ar.map((e=>e.name)),singerId:e.ar.map((e=>e.id)),source:y.query.keywords,sourceType:1,time:g(e.dt/1e3),albumName:e.al.name,albumId:e.al.id,pop:e.pop})})),I.value=(null==a?void 0:a.songCount)>300?300:null==a?void 0:a.songCount,_(I.value),q.value=a.songs)}))};z(),l((()=>y.query.keywords),(()=>{z(),x.value=1}));const C=s([{name:"音乐标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时长",props:"time",length:15},{name:"热度",props:"pop",length:40}]);return t((()=>{n.emit("changeHeaderSearchValue",{value:y.query.keywords,searchAtOnce:!1})})),(e,a)=>{const s=h;return c(),o("div",w,[r("div",A,[u(f,{"play-list":i(j)},null,8,["play-list"])]),u(k,{"play-list-detail":i(j),"title-setting":C.value,"oreder-base-count":(i(x)-1)*i(S)},null,8,["play-list-detail","title-setting","oreder-base-count"]),r("div",N,[u(s,{small:"",background:"",layout:"prev, pager, next",total:i(I),"page-size":i(S),"current-page":i(x),"onUpdate:current-page":a[0]||(a[0]=e=>p(x)?x.value=e:x=e),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-672929f2"]]);export{_ as default};
