import{d as a,e as l,j as e,r as s,k as n,o as i,c as t,u as r,l as o,F as c,m as u,a as d,t as v,q as m,v as p,b as g,s as y,x as h,y as k,_ as b,z as f,A as C,n as I,g as T,B as S,C as _,D as L,E as N,G as $}from"./index.92a5387d.js";import{P as x,S as j}from"./SongPlayList.ac9b9447.js";import{C as w,c as D}from"./Comment.f918a27e.js";import{E as P}from"./el-select.d3771ed3.js";import{p as U}from"./playListApi.55e3f3c0.js";const z=a=>(h("data-v-b4c3c4a9"),a=a(),k(),a),A={id:"subscribers"},B={key:0,class:"nosubscribers"},E=["onClick"],F=["src"],M={class:"userAndIntro"},q={class:"user"},G={class:"name"},R={class:"gender male"},V=[z((()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-nanxing"})],-1)))],Y={class:"gender female"},H=[z((()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-nvxing"})],-1)))],J={class:"pagination"},K=b(a({__name:"Subscribers",setup(a){const h=l(),k=e();let b=s(0),f=s(1),C=s(60),I=s();const T=()=>{I.value=[],U.getPlaylistSubscribers({id:h.params.id,limit:C.value,offset:(f.value-1)*C.value}).then((a=>{b.value=a.total,I.value=a.subscribers}))};return T(),n((()=>f.value),(()=>{T()})),(a,l)=>{const e=P;return i(),t("div",A,[r(I).length?o("",!0):(i(),t("div",B,"暂无收藏者")),(i(!0),t(c,null,u(r(I),((a,l)=>(i(),t("div",{class:"subscriber",key:l,onClick:l=>r(k).push(`/user/${null==a?void 0:a.userId}`)},[d("img",{src:`${null==a?void 0:a.avatarUrl}?param=110y110`},null,8,F),d("div",M,[d("div",q,[d("div",G,v(null==a?void 0:a.nickname),1),m(d("div",R,V,512),[[p,1===(null==a?void 0:a.gender)]]),m(d("div",Y,H,512),[[p,2===(null==a?void 0:a.gender)]])]),m(d("div",{class:"intro"},v(null==a?void 0:a.signature),513),[[p,null==a?void 0:a.signature]])])],8,E)))),128)),d("div",J,[g(e,{small:"",background:"",layout:"prev, pager, next",total:r(b),"page-size":r(C),"current-page":r(f),"onUpdate:current-page":l[0]||(l[0]=a=>y(f)?f.value=a:f=a),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-b4c3c4a9"]]),O=a=>(h("data-v-57fc166a"),a=a(),k(),a),Q={id:"songList"},W={class:"header"},X={class:"songListImg"},Z=["src"],aa={class:"detail"},la={class:"title"},ea=O((()=>d("div",{class:"alias"},"歌单",-1))),sa={class:"name"},na=O((()=>d("div",{class:"edit iconItem"},null,-1))),ia={class:"creater"},ta={class:"createrImg"},ra=["src"],oa={class:"time"},ca={class:"tool"},ua={class:"introduce"},da={class:"tags"},va=O((()=>d("span",{class:"introduceTitle"},"标签 : ",-1))),ma={class:"tagContent"},pa={class:"tagContent"},ga={class:"tagItem"},ya={class:"item"},ha={class:"gap"},ka={class:"songsCount"},ba=O((()=>d("span",{class:"introduceTitle"},"歌曲 : ",-1))),fa={class:"playTime"},Ca=O((()=>d("span",{class:"introduceTitle"},"播放 : ",-1))),Ia={class:"brief"},Ta=O((()=>d("span",{class:"introduceTitle"},"简介 : ",-1))),Sa={class:"briefContent"},_a={class:"navigate"},La=b(a({__name:"SongListView",setup(a){const e=l(),h=s();f();let k=s(!1),b=s(!1),P=s(-1),z=a=>{P.value=a};n((()=>e.params.id),(()=>{var a;A.value=1,B.value=[],E.value=[],F(),null==(a=h.value)||a.getComment()}));let A=s(1),B=s(),E=s([]);const F=()=>{var a;U.getPlaylistDetail({id:e.params.id}).then((a=>{var l,s,n,i,t,r,o;if(B.value=a.playlist,z(B.value.commentCount),((null==(s=null==(l=B.value)?void 0:l.description)?void 0:s.split("\n").length)>=2||(null==(i=null==(n=B.value)?void 0:n.description)?void 0:i.length)>70)&&(k.value=!0,b.value=!1),null==(r=null==(t=B.value)?void 0:t.trackIds)?void 0:r.length){let a=null==(o=B.value)?void 0:o.trackIds.map((a=>a.id));S.getSongDetail({ids:a.join(",")}).then((a=>{E.value=a.songs.map((a=>{var l;return{id:a.id,songName:a.name,singer:a.ar.map((a=>a.name)),singerId:a.ar.map((a=>a.id)),source:e.params.id,sourceType:_.playList,sourceName:null==(l=B.value)?void 0:l.name,albumName:a.al.name,albumId:a.al.id,time:L(a.dt/1e3)}}))}))}})).catch((a=>{N.replace("/")})),null==(a=h.value)||a.getComment()};F();const M=a=>{let l=new Date(a);return`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`};let q=s([{name:"标题",props:"songName",length:220},{name:"歌手",props:"singer",length:75},{name:"专辑",props:"albumName",length:75},{name:"时间",props:"time",length:15}]);return(a,l)=>{var e,s,n,f,S,_,L,U,F,G,R,V,Y,H,J,O,La,Na,$a,xa,ja,wa,Da,Pa;return i(),t("div",Q,[d("div",W,[d("div",X,[d("img",{src:`${null==(e=r(B))?void 0:e.coverImgUrl}?param=300y300`,alt:"",srcset:""},null,8,Z)]),d("div",aa,[d("div",la,[ea,d("div",sa,v(null==(s=r(B))?void 0:s.name),1),na]),d("div",ia,[m(d("div",ta,[d("img",{src:`${null==(f=null==(n=r(B))?void 0:n.creator)?void 0:f.avatarUrl}?param=100y100`,onClick:l[0]||(l[0]=a=>{var l,e;return r(N).push(`/user/${null==(e=null==(l=r(B))?void 0:l.creator)?void 0:e.userId}`)})},null,8,ra)],512),[[p,null==(_=null==(S=r(B))?void 0:S.creator)?void 0:_.avatarUrl]]),m(d("div",{class:"name",onClick:l[1]||(l[1]=a=>{var l,e;return r(N).push(`/user/${null==(e=null==(l=r(B))?void 0:l.creator)?void 0:e.userId}`)})},v(null==(U=null==(L=r(B))?void 0:L.creator)?void 0:U.nickname),513),[[p,null==(G=null==(F=r(B))?void 0:F.creator)?void 0:G.nickname]]),d("div",oa,v(M(null==(R=r(B))?void 0:R.createTime))+"创建",1)]),d("div",ca,[g(x,{"play-list":(Pa=r(E),Pa.map((a=>({id:a.id,songName:a.songName,singer:a.singer,source:a.source,sourceType:a.sourceType,sourceName:a.playListName,time:a.time}))))},null,8,["play-list"])]),d("div",ua,[m(d("div",da,[va,m(d("span",ma,"添加标签",512),[[p,!(null==(Y=null==(V=r(B))?void 0:V.tags)?void 0:Y.length)]]),m(d("span",pa,[(i(!0),t(c,null,u(null==(H=r(B))?void 0:H.tags,((a,l)=>{var e,s;return i(),t("span",ga,[d("span",ya,v(a),1),m(d("span",ha," / ",512),[[p,l!=(null==(s=null==(e=r(B))?void 0:e.tags)?void 0:s.length)-1]])])})),256))],512),[[p,null==(O=null==(J=r(B))?void 0:J.tags)?void 0:O.length]])],512),[[p,5!=(null==(La=r(B))?void 0:La.specialType)]]),d("div",ka,[ba,C(v(null==(Na=r(B))?void 0:Na.trackCount),1)]),d("div",fa,[Ca,C(v(r($)(null==($a=r(B))?void 0:$a.playCount)),1)]),m(d("div",Ia,[Ta,m(d("span",null,"添加简介",512),[[p,!(null==(xa=r(B))?void 0:xa.description)]]),m(d("div",{class:I(["moreBrief",{briefShort:!r(b)}])},[d("span",Sa,v(null==(ja=r(B))?void 0:ja.description),1),r(k)&&!r(b)?(i(),t("span",{key:0,class:"showMore",onClick:l[2]||(l[2]=a=>y(b)?b.value=!0:b=!0)})):o("",!0),r(k)&&r(b)?(i(),t("span",{key:1,class:"showLess",onClick:l[3]||(l[3]=a=>y(b)?b.value=!1:b=!1)})):o("",!0)],2),[[p,null==(wa=r(B))?void 0:wa.description]])],512),[[p,5!=(null==(Da=r(B))?void 0:Da.specialType)]])])])]),d("div",_a,[d("div",{class:I(["songPlayList",{isSelected:1===r(A)}]),onClick:l[4]||(l[4]=a=>y(A)?A.value=1:A=1)},"歌曲列表 ",2),d("div",{class:I(["comment",{isSelected:2===r(A)}]),onClick:l[5]||(l[5]=a=>y(A)?A.value=2:A=2)},"评论("+v(r(P)>0?r(P):0)+")",3),d("div",{class:I(["collecter",{isSelected:3===r(A)}]),onClick:l[6]||(l[6]=a=>y(A)?A.value=3:A=3)},"收藏者 ",2)]),m(g(j,{"play-list-detail":r(E),"title-setting":r(q),"show-tool-title":!0},null,8,["play-list-detail","title-setting"]),[[p,1===r(A)]]),2===r(A)?(i(),T(w,{key:0,type:r(D).playlist,"change-comment-count":r(z),ref_key:"commentRef",ref:h},null,8,["type","change-comment-count"])):o("",!0),3===r(A)?(i(),T(K,{key:1})):o("",!0)])}}}),[["__scopeId","data-v-57fc166a"]]);export{La as default};
