import{L as e,d as a,o as t,c as s,a as l,u as n,t as i,y as o,I as d,j as r,D as v,E as u,_ as m,r as c,l as p,F as g,q as b,b as f,x as h,n as k,e as y,m as I,v as x}from"./index.06d35deb.js";import{E as C}from"./el-select.b238e199.js";import{p as _}from"./playListApi.188b90fa.js";const S=a=>e({url:`/comment/playlist?timerstamp=${Date.now()}`,method:"GET",params:a}),$=a=>e({url:`/comment/like?timerstamp=${Date.now()}`,method:"GET",params:a});var j=(e=>(e[e.song=0]="song",e[e.mv=1]="mv",e[e.playlist=2]="playlist",e[e.album=3]="album",e[e.radiioStationProgram=4]="radiioStationProgram",e[e.video=5]="video",e[e.post=6]="post",e[e.radiioStation=7]="radiioStation",e))(j||{});const z={class:"contentItem"},A=["src"],T={class:"detail"},q={class:"nameAndText"},w={class:"text"},B={key:0,id:"reply"},E={class:"text"},R={class:"timeAndTool"},U={class:"time"},D={class:"commentTool"},P=(e=>(v("data-v-45d0aa7f"),e=e(),u(),e))((()=>l("div",{class:"support"},[l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-dianzan"})])],-1))),F={class:"supportCount"},G=d('<div class="gap" data-v-45d0aa7f>|</div><div class="share" data-v-45d0aa7f><svg class="icon" aria-hidden="true" data-v-45d0aa7f><use xlink:href="#icon-fenxiang" data-v-45d0aa7f></use></svg></div><div class="gap" data-v-45d0aa7f>|</div><div class="reply" data-v-45d0aa7f><svg class="icon" aria-hidden="true" data-v-45d0aa7f><use xlink:href="#icon-pinglun" data-v-45d0aa7f></use></svg></div>',4),H=m(a({__name:"Comment",props:{commentItem:{type:Object,required:!0},likeCommentButton:{type:Function,required:!0}},setup(e){const a=r();return(d,r)=>{var v,u,m,c,p,g,b,f,h,k,y,I,x,C;return t(),s("div",z,[l("img",{src:`${null==(u=null==(v=e.commentItem)?void 0:v.user)?void 0:u.avatarUrl}?param=60y60`,onClick:r[0]||(r[0]=t=>{var s,l;return n(a).push(`/user/${null==(l=null==(s=e.commentItem)?void 0:s.user)?void 0:l.userId}`)})},null,8,A),l("div",T,[l("div",q,[l("span",{class:"name",onClick:r[1]||(r[1]=t=>{var s,l;return n(a).push(`/user/${null==(l=null==(s=e.commentItem)?void 0:s.user)?void 0:l.userId}`)})},i(null==(c=null==(m=e.commentItem)?void 0:m.user)?void 0:c.nickname),1),l("span",w," : "+i(null==(p=e.commentItem)?void 0:p.content),1)]),(null==(b=null==(g=e.commentItem)?void 0:g.beReplied)?void 0:b.length)?(t(),s("div",B,[l("div",{class:"name",onClick:r[2]||(r[2]=t=>{var s,l,i;return n(a).push(`/user/${null==(i=null==(l=null==(s=e.commentItem)?void 0:s.beReplied[0])?void 0:l.user)?void 0:i.userId}`)})},"@"+i(null==(k=null==(h=null==(f=e.commentItem)?void 0:f.beReplied[0])?void 0:h.user)?void 0:k.nickname),1),l("div",E," : "+i(null==(I=null==(y=e.commentItem)?void 0:y.beReplied[0])?void 0:I.content),1)])):o("",!0),l("div",R,[l("div",U,i(null==(x=e.commentItem)?void 0:x.timeStr),1),l("div",D,[l("div",{class:"supportAndCount",onClick:r[3]||(r[3]=a=>{var t,s;return e.likeCommentButton(null==(t=e.commentItem)?void 0:t.commentId,(null==(s=e.commentItem)?void 0:s.liked)?0:1)})},[P,l("span",F,i(null==(C=e.commentItem)?void 0:C.likedCount),1)]),G])])])])}}}),[["__scopeId","data-v-45d0aa7f"]]),L=e=>(v("data-v-8bb76fe2"),e=e(),u(),e),N={id:"comment"},O=d('<textarea class="textarea customeScroll" name="saysths" rows="3" wrap="soft" data-v-8bb76fe2></textarea><div class="tool" data-v-8bb76fe2><div class="iconItem" data-v-8bb76fe2><div class="topic" data-v-8bb76fe2><svg class="icon" aria-hidden="true" data-v-8bb76fe2><use xlink:href="#icon-hashjinghao" data-v-8bb76fe2></use></svg></div><div class="at" data-v-8bb76fe2><svg class="icon" aria-hidden="true" data-v-8bb76fe2><use xlink:href="#icon-aite1" data-v-8bb76fe2></use></svg></div><div class="emoji" data-v-8bb76fe2><svg class="icon" aria-hidden="true" data-v-8bb76fe2><use xlink:href="#icon-xiaolian1" data-v-8bb76fe2></use></svg></div></div><div class="sendComment" data-v-8bb76fe2>评论</div></div>',2),J={class:"content"},K={key:0,class:"noComment"},M={key:1,class:"hotComment"},Q=L((()=>l("div",{class:"title"},"精彩评论",-1))),V={key:2,class:"moreHotComment"},W={key:3,class:"latestComment"},X={class:"title"},Y={class:"pagination"},Z=m(a({__name:"Comment",props:{type:{type:Number,required:!0}},setup(e,{expose:a}){const d=e,r=y();let v=c(),u=c(),m=c(),I=c(0),x=c(1),_=c(100);const z=(e,a)=>{$({id:r.params.id,cid:e,t:a,type:d.type}).then((e=>{A()}))},A=()=>{if(d.type===j.playlist)T(_.value,(x.value-1)*_.value)},T=(e,a,t)=>{S({id:r.params.id,limit:e,offset:a}).then((e=>{var a;v.value=null==e?void 0:e.comments,I.value=e.total,u.value=null==(a=null==e?void 0:e.hotComments)?void 0:a.slice(0,10),m.value=null==e?void 0:e.moreHot}))};return p((()=>x.value),(()=>{v.value=[],u.value=[],A()}),{immediate:!0}),a({getComment:A}),(e,a)=>{var d,r,c,p,y;const S=C;return t(),s("div",N,[O,l("div",J,[(null==(d=n(v))?void 0:d.length)||(null==(r=n(u))?void 0:r.length)?o("",!0):(t(),s("div",K," 还没有评论，快来抢沙发~ ")),(null==(c=n(u))?void 0:c.length)?(t(),s("div",M,[Q,(t(!0),s(g,null,b(n(u),((e,a)=>(t(),s("div",{class:"contentItem borderBottom",key:a},[f(H,{"comment-item":e,"like-comment-button":z},null,8,["comment-item"])])))),128))])):o("",!0),(null==(p=n(u))?void 0:p.length)&&n(m)?(t(),s("div",V," 更多精彩评论 > ")):o("",!0),(null==(y=n(v))?void 0:y.length)?(t(),s("div",W,[l("div",X,"最新评论("+i(n(I))+")",1),(t(!0),s(g,null,b(n(v),((e,a)=>{var l;return t(),s("div",{class:k(["contentItem",{borderBottom:a!=(null==(l=n(v))?void 0:l.length)-1}]),key:a},[f(H,{"comment-item":e,"like-comment-button":z},null,8,["comment-item"])],2)})),128))])):o("",!0),l("div",Y,[f(S,{small:"",background:"",layout:"prev, pager, next",total:n(I),"page-size":n(_),"current-page":n(x),"onUpdate:current-page":a[0]||(a[0]=e=>h(x)?x.value=e:x=e),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])])}}}),[["__scopeId","data-v-8bb76fe2"]]),ee=e=>(v("data-v-77181226"),e=e(),u(),e),ae={id:"subscribers"},te={key:0,class:"nosubscribers"},se=["onClick"],le=["src"],ne={class:"userAndIntro"},ie={class:"user"},oe={class:"name"},de={class:"gender male"},re=[ee((()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-nanxing"})],-1)))],ve={class:"gender female"},ue=[ee((()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-nvxing"})],-1)))],me={class:"pagination"},ce=m(a({__name:"Subscribers",setup(e){const a=y(),d=r();let v=c(0),u=c(1),m=c(60),k=c();const S=()=>{k.value=[],_.getPlaylistSubscribers({id:a.params.id,limit:m.value,offset:(u.value-1)*m.value}).then((e=>{v.value=e.total,k.value=e.subscribers}))};return S(),p((()=>u.value),(()=>{S()})),(e,a)=>{const r=C;return t(),s("div",ae,[n(k).length?o("",!0):(t(),s("div",te,"暂无收藏者")),(t(!0),s(g,null,b(n(k),((e,a)=>(t(),s("div",{class:"subscriber",key:a,onClick:a=>n(d).push(`/user/${null==e?void 0:e.userId}`)},[l("img",{src:`${null==e?void 0:e.avatarUrl}?param=110y110`},null,8,le),l("div",ne,[l("div",ie,[l("div",oe,i(null==e?void 0:e.nickname),1),I(l("div",de,re,512),[[x,1===(null==e?void 0:e.gender)]]),I(l("div",ve,ue,512),[[x,2===(null==e?void 0:e.gender)]])]),I(l("div",{class:"intro"},i(null==e?void 0:e.signature),513),[[x,null==e?void 0:e.signature]])])],8,se)))),128)),l("div",me,[f(r,{small:"",background:"",layout:"prev, pager, next",total:n(v),"page-size":n(m),"current-page":n(u),"onUpdate:current-page":a[0]||(a[0]=e=>h(u)?u.value=e:u=e),"hide-on-single-page":!0,class:"mt-4"},null,8,["total","page-size","current-page"])])])}}}),[["__scopeId","data-v-77181226"]]);export{Z as C,ce as a,j as c};
